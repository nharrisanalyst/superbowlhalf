(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function se(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _i(t){let e,n,r;t.length!==2?(e=se,n=(s,c)=>se(t(s),c),r=(s,c)=>t(s)-c):(e=t===se||t===eo?t:no,n=t,r=t);function i(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const l=u+f>>>1;n(s[l],c)<0?u=l+1:f=l}while(u<f)}return u}function a(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const l=u+f>>>1;n(s[l],c)<=0?u=l+1:f=l}while(u<f)}return u}function o(s,c,u=0,f=s.length){const l=i(s,c,u,f-1);return l>u&&r(s[l-1],c)>-r(s[l],c)?l-1:l}return{left:i,center:o,right:a}}function no(){return 0}function ro(t){return t===null?NaN:+t}const io=_i(se),ao=io.right;_i(ro).center;class cr extends Map{constructor(e,n=co){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ur(this,e))}has(e){return super.has(ur(this,e))}set(e,n){return super.set(oo(this,e),n)}delete(e){return super.delete(so(this,e))}}function ur({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function oo({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function so({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function co(t){return t!==null&&typeof t=="object"?t.valueOf():t}const uo=Math.sqrt(50),fo=Math.sqrt(10),lo=Math.sqrt(2);function de(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=uo?10:a>=fo?5:a>=lo?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=n&&n<2?de(t,e,n*2):[s,c,u]}function ho(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?de(e,t,n):de(t,e,n);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)c[u]=(a-u)/-o;else for(let u=0;u<s;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(i+u)/-o;else for(let u=0;u<s;++u)c[u]=(i+u)*o;return c}function fn(t,e,n){return e=+e,t=+t,n=+n,de(t,e,n)[2]}function po(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?fn(e,t,n):fn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function go(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function yo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function _o(t){return t}var Ue=1,Ge=2,ln=3,Ht=4,fr=1e-6;function mo(t){return"translate("+t+",0)"}function vo(t){return"translate(0,"+t+")"}function xo(t){return e=>+t(e)}function bo(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function wo(){return!this.__axis}function mi(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Ue||t===Ht?-1:1,f=t===Ht||t===Ge?"x":"y",l=t===Ue||t===ln?mo:vo;function h(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):_o),_=Math.max(a,0)+s,M=e.range(),w=+M[0]+c,$=+M[M.length-1]+c,y=(e.bandwidth?bo:xo)(e.copy(),c),x=d.selection?d.selection():d,S=x.selectAll(".domain").data([null]),b=x.selectAll(".tick").data(p,e).order(),v=b.exit(),T=b.enter().append("g").attr("class","tick"),C=b.select("line"),A=b.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(T),C=C.merge(T.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),A=A.merge(T.append("text").attr("fill","currentColor").attr(f,u*_).attr("dy",t===Ue?"0em":t===ln?"0.71em":"0.32em")),d!==x&&(S=S.transition(d),b=b.transition(d),C=C.transition(d),A=A.transition(d),v=v.transition(d).attr("opacity",fr).attr("transform",function(N){return isFinite(N=y(N))?l(N+c):this.getAttribute("transform")}),T.attr("opacity",fr).attr("transform",function(N){var k=this.parentNode.__axis;return l((k&&isFinite(k=k(N))?k:y(N))+c)})),v.remove(),S.attr("d",t===Ht||t===Ge?o?"M"+u*o+","+w+"H"+c+"V"+$+"H"+u*o:"M"+c+","+w+"V"+$:o?"M"+w+","+u*o+"V"+c+"H"+$+"V"+u*o:"M"+w+","+c+"H"+$),b.attr("opacity",1).attr("transform",function(N){return l(y(N)+c)}),C.attr(f+"2",u*a),A.attr(f,u*_).text(g),x.filter(wo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ge?"start":t===Ht?"end":"middle"),x.each(function(){this.__axis=y})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function $o(t){return mi(ln,t)}function Mo(t){return mi(Ht,t)}var ko={value:()=>{}};function vi(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ce(n)}function ce(t){this._=t}function No(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ce.prototype=vi.prototype={constructor:ce,on:function(t,e){var n=this._,r=No(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Ao(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=lr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=lr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ce(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Ao(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function lr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ko,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var hn="http://www.w3.org/1999/xhtml";const hr={svg:"http://www.w3.org/2000/svg",xhtml:hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function De(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),hr.hasOwnProperty(e)?{space:hr[e],local:t}:t}function So(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hn&&e.documentElement.namespaceURI===hn?e.createElement(t):e.createElementNS(n,t)}}function To(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xi(t){var e=De(t);return(e.local?To:So)(e)}function Co(){}function En(t){return t==null?Co:function(){return this.querySelector(t)}}function Eo(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new V(r,this._parents)}function Oo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Po(){return[]}function bi(t){return t==null?Po:function(){return this.querySelectorAll(t)}}function Ro(t){return function(){return Oo(t.apply(this,arguments))}}function Do(t){typeof t=="function"?t=Ro(t):t=bi(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(r.push(t.call(c,c.__data__,u,o)),i.push(c));return new V(r,i)}function wi(t){return function(){return this.matches(t)}}function $i(t){return function(e){return e.matches(t)}}var Io=Array.prototype.find;function Lo(t){return function(){return Io.call(this.children,t)}}function qo(){return this.firstElementChild}function Bo(t){return this.select(t==null?qo:Lo(typeof t=="function"?t:$i(t)))}var Ho=Array.prototype.filter;function Fo(){return Array.from(this.children)}function jo(t){return function(){return Ho.call(this.children,t)}}function zo(t){return this.selectAll(t==null?Fo:jo(typeof t=="function"?t:$i(t)))}function Vo(t){typeof t!="function"&&(t=wi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new V(r,this._parents)}function Mi(t){return new Array(t.length)}function Xo(){return new V(this._enter||this._groups.map(Mi),this._parents)}function pe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}pe.prototype={constructor:pe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Wo(t){return function(){return t}}function Yo(t,e,n,r,i,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new pe(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function Uo(t,e,n,r,i,a,o){var s,c,u=new Map,f=e.length,l=a.length,h=new Array(f),d;for(s=0;s<f;++s)(c=e[s])&&(h[s]=d=o.call(c,c.__data__,s,e)+"",u.has(d)?i[s]=c:u.set(d,c));for(s=0;s<l;++s)d=o.call(t,a[s],s,a)+"",(c=u.get(d))?(r[s]=c,c.__data__=a[s],u.delete(d)):n[s]=new pe(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u.get(h[s])===c&&(i[s]=c)}function Go(t){return t.__data__}function Ko(t,e){if(!arguments.length)return Array.from(this,Go);var n=e?Uo:Yo,r=this._parents,i=this._groups;typeof t!="function"&&(t=Wo(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=r[u],l=i[u],h=l.length,d=Zo(t.call(f,f&&f.__data__,u,r)),p=d.length,g=s[u]=new Array(p),_=o[u]=new Array(p),M=c[u]=new Array(h);n(f,l,g,_,M,d,e);for(var w=0,$=0,y,x;w<p;++w)if(y=g[w]){for(w>=$&&($=w+1);!(x=_[$])&&++$<p;);y._next=x||null}}return o=new V(o,r),o._enter=s,o._exit=c,o}function Zo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jo(){return new V(this._exit||this._groups.map(Mi),this._parents)}function Qo(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function ts(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var u=n[c],f=r[c],l=u.length,h=s[c]=new Array(l),d,p=0;p<l;++p)(d=u[p]||f[p])&&(h[p]=d);for(;c<i;++c)s[c]=n[c];return new V(s,this._parents)}function es(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function ns(t){t||(t=rs);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new V(i,this._parents).order()}function rs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function is(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function as(){return Array.from(this)}function os(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ss(){let t=0;for(const e of this)++t;return t}function cs(){return!this.node()}function us(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function fs(t){return function(){this.removeAttribute(t)}}function ls(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hs(t,e){return function(){this.setAttribute(t,e)}}function ds(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ps(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ys(t,e){var n=De(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ls:fs:typeof e=="function"?n.local?gs:ps:n.local?ds:hs)(n,e))}function ki(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _s(t){return function(){this.style.removeProperty(t)}}function ms(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vs(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xs(t,e,n){return arguments.length>1?this.each((e==null?_s:typeof e=="function"?vs:ms)(t,e,n??"")):Tt(this.node(),t)}function Tt(t,e){return t.style.getPropertyValue(e)||ki(t).getComputedStyle(t,null).getPropertyValue(e)}function bs(t){return function(){delete this[t]}}function ws(t,e){return function(){this[t]=e}}function $s(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ms(t,e){return arguments.length>1?this.each((e==null?bs:typeof e=="function"?$s:ws)(t,e)):this.node()[t]}function Ni(t){return t.trim().split(/^|\s+/)}function On(t){return t.classList||new Ai(t)}function Ai(t){this._node=t,this._names=Ni(t.getAttribute("class")||"")}Ai.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Si(t,e){for(var n=On(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ti(t,e){for(var n=On(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ks(t){return function(){Si(this,t)}}function Ns(t){return function(){Ti(this,t)}}function As(t,e){return function(){(e.apply(this,arguments)?Si:Ti)(this,t)}}function Ss(t,e){var n=Ni(t+"");if(arguments.length<2){for(var r=On(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?As:e?ks:Ns)(n,e))}function Ts(){this.textContent=""}function Cs(t){return function(){this.textContent=t}}function Es(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Os(t){return arguments.length?this.each(t==null?Ts:(typeof t=="function"?Es:Cs)(t)):this.node().textContent}function Ps(){this.innerHTML=""}function Rs(t){return function(){this.innerHTML=t}}function Ds(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Is(t){return arguments.length?this.each(t==null?Ps:(typeof t=="function"?Ds:Rs)(t)):this.node().innerHTML}function Ls(){this.nextSibling&&this.parentNode.appendChild(this)}function qs(){return this.each(Ls)}function Bs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hs(){return this.each(Bs)}function Fs(t){var e=typeof t=="function"?t:xi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function js(){return null}function zs(t,e){var n=typeof t=="function"?t:xi(t),r=e==null?js:typeof e=="function"?e:En(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vs(){var t=this.parentNode;t&&t.removeChild(this)}function Xs(){return this.each(Vs)}function Ws(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ys(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Us(t){return this.select(t?Ys:Ws)}function Gs(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ks(t){return function(e){t.call(this,e,this.__data__)}}function Zs(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Js(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Qs(t,e,n){return function(){var r=this.__on,i,a=Ks(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function tc(t,e,n){var r=Zs(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(i=0,f=s[c];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?Qs:Js,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Ci(t,e,n){var r=ki(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ec(t,e){return function(){return Ci(this,t,e)}}function nc(t,e){return function(){return Ci(this,t,e.apply(this,arguments))}}function rc(t,e){return this.each((typeof e=="function"?nc:ec)(t,e))}function*ic(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Ei=[null];function V(t,e){this._groups=t,this._parents=e}function Kt(){return new V([[document.documentElement]],Ei)}function ac(){return this}V.prototype=Kt.prototype={constructor:V,select:Eo,selectAll:Do,selectChild:Bo,selectChildren:zo,filter:Vo,data:Ko,enter:Xo,exit:Jo,join:Qo,merge:ts,selection:ac,order:es,sort:ns,call:is,nodes:as,node:os,size:ss,empty:cs,each:us,attr:ys,style:xs,property:Ms,classed:Ss,text:Os,html:Is,raise:qs,lower:Hs,append:Fs,insert:zs,remove:Xs,clone:Us,datum:Gs,on:tc,dispatch:rc,[Symbol.iterator]:ic};function Ke(t){return typeof t=="string"?new V([[document.querySelector(t)]],[document.documentElement]):new V([[t]],Ei)}function Pn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zt(){}var Vt=.7,ge=1/Vt,kt="\\s*([+-]?\\d+)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oc=/^#([0-9a-f]{3,8})$/,sc=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),cc=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),uc=new RegExp(`^rgba\\(${kt},${kt},${kt},${Xt}\\)$`),fc=new RegExp(`^rgba\\(${it},${it},${it},${Xt}\\)$`),lc=new RegExp(`^hsl\\(${Xt},${it},${it}\\)$`),hc=new RegExp(`^hsla\\(${Xt},${it},${it},${Xt}\\)$`),dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pn(Zt,bt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pr,formatHex:pr,formatHex8:dc,formatHsl:pc,formatRgb:gr,toString:gr});function pr(){return this.rgb().formatHex()}function dc(){return this.rgb().formatHex8()}function pc(){return Pi(this).formatHsl()}function gr(){return this.rgb().formatRgb()}function bt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yr(e):n===3?new z(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Jt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Jt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=sc.exec(t))?new z(e[1],e[2],e[3],1):(e=cc.exec(t))?new z(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uc.exec(t))?Jt(e[1],e[2],e[3],e[4]):(e=fc.exec(t))?Jt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lc.exec(t))?vr(e[1],e[2]/100,e[3]/100,1):(e=hc.exec(t))?vr(e[1],e[2]/100,e[3]/100,e[4]):dr.hasOwnProperty(t)?yr(dr[t]):t==="transparent"?new z(NaN,NaN,NaN,0):null}function yr(t){return new z(t>>16&255,t>>8&255,t&255,1)}function Jt(t,e,n,r){return r<=0&&(t=e=n=NaN),new z(t,e,n,r)}function gc(t){return t instanceof Zt||(t=bt(t)),t?(t=t.rgb(),new z(t.r,t.g,t.b,t.opacity)):new z}function dn(t,e,n,r){return arguments.length===1?gc(t):new z(t,e,n,r??1)}function z(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Pn(z,dn,Oi(Zt,{brighter(t){return t=t==null?ge:Math.pow(ge,t),new z(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vt:Math.pow(Vt,t),new z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new z(vt(this.r),vt(this.g),vt(this.b),ye(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_r,formatHex:_r,formatHex8:yc,formatRgb:mr,toString:mr}));function _r(){return`#${mt(this.r)}${mt(this.g)}${mt(this.b)}`}function yc(){return`#${mt(this.r)}${mt(this.g)}${mt(this.b)}${mt((isNaN(this.opacity)?1:this.opacity)*255)}`}function mr(){const t=ye(this.opacity);return`${t===1?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${t===1?")":`, ${t})`}`}function ye(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mt(t){return t=vt(t),(t<16?"0":"")+t.toString(16)}function vr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Z(t,e,n,r)}function Pi(t){if(t instanceof Z)return new Z(t.h,t.s,t.l,t.opacity);if(t instanceof Zt||(t=bt(t)),!t)return new Z;if(t instanceof Z)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Z(o,s,c,t.opacity)}function _c(t,e,n,r){return arguments.length===1?Pi(t):new Z(t,e,n,r??1)}function Z(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Pn(Z,_c,Oi(Zt,{brighter(t){return t=t==null?ge:Math.pow(ge,t),new Z(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vt:Math.pow(Vt,t),new Z(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new z(Ze(t>=240?t-240:t+120,i,r),Ze(t,i,r),Ze(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Z(xr(this.h),Qt(this.s),Qt(this.l),ye(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ye(this.opacity);return`${t===1?"hsl(":"hsla("}${xr(this.h)}, ${Qt(this.s)*100}%, ${Qt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xr(t){return t=(t||0)%360,t<0?t+360:t}function Qt(t){return Math.max(0,Math.min(1,t||0))}function Ze(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Rn=t=>()=>t;function mc(t,e){return function(n){return t+n*e}}function vc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xc(t){return(t=+t)==1?Ri:function(e,n){return n-e?vc(e,n,t):Rn(isNaN(e)?n:e)}}function Ri(t,e){var n=e-t;return n?mc(t,n):Rn(isNaN(t)?e:t)}const _e=function t(e){var n=xc(e);function r(i,a){var o=n((i=dn(i)).r,(a=dn(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),u=Ri(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function bc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function wc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $c(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Dn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Mc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function K(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function kc(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Je=new RegExp(pn.source,"g");function Nc(t){return function(){return t}}function Ac(t){return function(e){return t(e)+""}}function Di(t,e){var n=pn.lastIndex=Je.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=pn.exec(t))&&(i=Je.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:K(r,i)})),n=Je.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Ac(c[0].x):Nc(e):(e=c.length,function(u){for(var f=0,l;f<e;++f)s[(l=c[f]).i]=l.x(u);return s.join("")})}function Dn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Rn(e):(n==="number"?K:n==="string"?(r=bt(e))?(e=r,_e):Di:e instanceof bt?_e:e instanceof Date?Mc:wc(e)?bc:Array.isArray(e)?$c:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kc:K)(t,e)}function Sc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var br=180/Math.PI,gn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ii(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*br,skewX:Math.atan(c)*br,scaleX:o,scaleY:s}}var te;function Tc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gn:Ii(e.a,e.b,e.c,e.d,e.e,e.f)}function Cc(t){return t==null||(te||(te=document.createElementNS("http://www.w3.org/2000/svg","g")),te.setAttribute("transform",t),!(t=te.transform.baseVal.consolidate()))?gn:(t=t.matrix,Ii(t.a,t.b,t.c,t.d,t.e,t.f))}function Li(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,l,h,d,p){if(u!==l||f!==h){var g=d.push("translate(",null,e,null,n);p.push({i:g-4,x:K(u,l)},{i:g-2,x:K(f,h)})}else(l||h)&&d.push("translate("+l+e+h+n)}function o(u,f,l,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:l.push(i(l)+"rotate(",null,r)-2,x:K(u,f)})):f&&l.push(i(l)+"rotate("+f+r)}function s(u,f,l,h){u!==f?h.push({i:l.push(i(l)+"skewX(",null,r)-2,x:K(u,f)}):f&&l.push(i(l)+"skewX("+f+r)}function c(u,f,l,h,d,p){if(u!==l||f!==h){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:K(u,l)},{i:g-2,x:K(f,h)})}else(l!==1||h!==1)&&d.push(i(d)+"scale("+l+","+h+")")}return function(u,f){var l=[],h=[];return u=t(u),f=t(f),a(u.translateX,u.translateY,f.translateX,f.translateY,l,h),o(u.rotate,f.rotate,l,h),s(u.skewX,f.skewX,l,h),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,l,h),u=f=null,function(d){for(var p=-1,g=h.length,_;++p<g;)l[(_=h[p]).i]=_.x(d);return l.join("")}}}var Ec=Li(Tc,"px, ","px)","deg)"),Oc=Li(Cc,", ",")",")"),Ct=0,Ft=0,Lt=0,qi=1e3,me,jt,ve=0,wt=0,Ie=0,Wt=typeof performance=="object"&&performance.now?performance:Date,Bi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function In(){return wt||(Bi(Pc),wt=Wt.now()+Ie)}function Pc(){wt=0}function xe(){this._call=this._time=this._next=null}xe.prototype=Hi.prototype={constructor:xe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?In():+n)+(e==null?0:+e),!this._next&&jt!==this&&(jt?jt._next=this:me=this,jt=this),this._call=t,this._time=n,yn()},stop:function(){this._call&&(this._call=null,this._time=1/0,yn())}};function Hi(t,e,n){var r=new xe;return r.restart(t,e,n),r}function Rc(){In(),++Ct;for(var t=me,e;t;)(e=wt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ct}function wr(){wt=(ve=Wt.now())+Ie,Ct=Ft=0;try{Rc()}finally{Ct=0,Ic(),wt=0}}function Dc(){var t=Wt.now(),e=t-ve;e>qi&&(Ie-=e,ve=t)}function Ic(){for(var t,e=me,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:me=n);jt=t,yn(r)}function yn(t){if(!Ct){Ft&&(Ft=clearTimeout(Ft));var e=t-wt;e>24?(t<1/0&&(Ft=setTimeout(wr,t-Wt.now()-Ie)),Lt&&(Lt=clearInterval(Lt))):(Lt||(ve=Wt.now(),Lt=setInterval(Dc,qi)),Ct=1,Bi(wr))}}function $r(t,e,n){var r=new xe;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Lc=vi("start","end","cancel","interrupt"),qc=[],Fi=0,Mr=1,_n=2,ue=3,kr=4,mn=5,fe=6;function Le(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Bc(t,n,{name:e,index:r,group:i,on:Lc,tween:qc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Fi})}function Ln(t,e){var n=J(t,e);if(n.state>Fi)throw new Error("too late; already scheduled");return n}function ct(t,e){var n=J(t,e);if(n.state>ue)throw new Error("too late; already running");return n}function J(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Bc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Hi(a,0,n.time);function a(u){n.state=Mr,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,l,h,d;if(n.state!==Mr)return c();for(f in r)if(d=r[f],d.name===n.name){if(d.state===ue)return $r(o);d.state===kr?(d.state=fe,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[f]):+f<e&&(d.state=fe,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[f])}if($r(function(){n.state===ue&&(n.state=kr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=_n,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_n){for(n.state=ue,i=new Array(h=n.tween.length),f=0,l=-1;f<h;++f)(d=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=d);i.length=l+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=mn,1),l=-1,h=i.length;++l<h;)i[l].call(t,f);n.state===mn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=fe,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Hc(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>_n&&r.state<mn,r.state=fe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Fc(t){return this.each(function(){Hc(this,t)})}function jc(t,e){var n,r;return function(){var i=ct(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zc(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ct(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function Vc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=J(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?jc:zc)(n,t,e))}function qn(t,e,n){var r=t._id;return t.each(function(){var i=ct(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return J(i,r).value[e]}}function ji(t,e){var n;return(typeof e=="number"?K:e instanceof bt?_e:(n=bt(e))?(e=n,_e):Di)(t,e)}function Xc(t){return function(){this.removeAttribute(t)}}function Wc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yc(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Uc(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Gc(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function Kc(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function Zc(t,e){var n=De(t),r=n==="transform"?Oc:ji;return this.attrTween(t,typeof e=="function"?(n.local?Kc:Gc)(n,r,qn(this,"attr."+t,e)):e==null?(n.local?Wc:Xc)(n):(n.local?Uc:Yc)(n,r,e))}function Jc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Qc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function tu(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Qc(t,a)),n}return i._value=e,i}function eu(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Jc(t,a)),n}return i._value=e,i}function nu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=De(t);return this.tween(n,(r.local?tu:eu)(r,e))}function ru(t,e){return function(){Ln(this,t).delay=+e.apply(this,arguments)}}function iu(t,e){return e=+e,function(){Ln(this,t).delay=e}}function au(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ru:iu)(e,t)):J(this.node(),e).delay}function ou(t,e){return function(){ct(this,t).duration=+e.apply(this,arguments)}}function su(t,e){return e=+e,function(){ct(this,t).duration=e}}function cu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ou:su)(e,t)):J(this.node(),e).duration}function uu(t,e){if(typeof e!="function")throw new Error;return function(){ct(this,t).ease=e}}function fu(t){var e=this._id;return arguments.length?this.each(uu(e,t)):J(this.node(),e).ease}function lu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ct(this,t).ease=n}}function hu(t){if(typeof t!="function")throw new Error;return this.each(lu(this._id,t))}function du(t){typeof t!="function"&&(t=wi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new lt(r,this._parents,this._name,this._id)}function pu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,l=o[s]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;s<r;++s)o[s]=e[s];return new lt(o,this._parents,this._name,this._id)}function gu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function yu(t,e,n){var r,i,a=gu(e)?Ln:ct;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function _u(t,e){var n=this._id;return arguments.length<2?J(this.node(),n).on.on(t):this.each(yu(n,t,e))}function mu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function vu(){return this.on("end.remove",mu(this._id))}function xu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=En(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,u=a[o]=new Array(c),f,l,h=0;h<c;++h)(f=s[h])&&(l=t.call(f,f.__data__,h,s))&&("__data__"in f&&(l.__data__=f.__data__),u[h]=l,Le(u[h],e,n,h,u,J(f,n)));return new lt(a,this._parents,e,n)}function bu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bi(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],u=c.length,f,l=0;l<u;++l)if(f=c[l]){for(var h=t.call(f,f.__data__,l,c),d,p=J(f,n),g=0,_=h.length;g<_;++g)(d=h[g])&&Le(d,e,n,g,h,p);a.push(h),o.push(f)}return new lt(a,o,e,n)}var wu=Kt.prototype.constructor;function $u(){return new wu(this._groups,this._parents)}function Mu(t,e){var n,r,i;return function(){var a=Tt(this,t),o=(this.style.removeProperty(t),Tt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function zi(t){return function(){this.style.removeProperty(t)}}function ku(t,e,n){var r,i=n+"",a;return function(){var o=Tt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Nu(t,e,n){var r,i,a;return function(){var o=Tt(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),Tt(this,t))),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}function Au(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var c=ct(this,t),u=c.on,f=c.value[a]==null?s||(s=zi(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(o,i=f),c.on=r}}function Su(t,e,n){var r=(t+="")=="transform"?Ec:ji;return e==null?this.styleTween(t,Mu(t,r)).on("end.style."+t,zi(t)):typeof e=="function"?this.styleTween(t,Nu(t,r,qn(this,"style."+t,e))).each(Au(this._id,t)):this.styleTween(t,ku(t,r,e),n).on("end.style."+t,null)}function Tu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Cu(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Tu(t,o,n)),r}return a._value=e,a}function Eu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Cu(t,e,n??""))}function Ou(t){return function(){this.textContent=t}}function Pu(t){return function(){var e=t(this);this.textContent=e??""}}function Ru(t){return this.tween("text",typeof t=="function"?Pu(qn(this,"text",t)):Ou(t==null?"":t+""))}function Du(t){return function(e){this.textContent=t.call(this,e)}}function Iu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Du(i)),e}return r._value=t,r}function Lu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Iu(t))}function qu(){for(var t=this._name,e=this._id,n=Vi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,u=0;u<s;++u)if(c=o[u]){var f=J(c,e);Le(c,t,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new lt(r,this._parents,t,n)}function Bu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var u=ct(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),u.on=e}),i===0&&a()})}var Hu=0;function lt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Vi(){return++Hu}var ut=Kt.prototype;lt.prototype={constructor:lt,select:xu,selectAll:bu,selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:du,merge:pu,selection:$u,transition:qu,call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:_u,attr:Zc,attrTween:nu,style:Su,styleTween:Eu,text:Ru,textTween:Lu,remove:vu,tween:Vc,delay:au,duration:cu,ease:fu,easeVarying:hu,end:Bu,[Symbol.iterator]:ut[Symbol.iterator]};function Fu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ju={time:null,delay:0,duration:250,ease:Fu};function zu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Vu(t){var e,n;t instanceof lt?(e=t._id,t=t._name):(e=Vi(),(n=ju).time=In(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&Le(c,t,e,u,o,n||zu(c,e));return new lt(r,this._parents,t,e)}Kt.prototype.interrupt=Fc;Kt.prototype.transition=Vu;const vn=Math.PI,xn=2*vn,yt=1e-6,Xu=xn-yt;function Xi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Wu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Xi;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Yu=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Xi:Wu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,c=r-e,u=i-n,f=o-e,l=s-n,h=f*f+l*l;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>yt)if(!(Math.abs(l*c-u*f)>yt)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,p=i-s,g=c*c+u*u,_=d*d+p*p,M=Math.sqrt(g),w=Math.sqrt(h),$=a*Math.tan((vn-Math.acos((g+h-_)/(2*M*w)))/2),y=$/w,x=$/M;Math.abs(y-1)>yt&&this._append`L${e+y*f},${n+y*l}`,this._append`A${a},${a},0,0,${+(l*d>f*p)},${this._x1=e+x*c},${this._y1=n+x*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),u=e+s,f=n+c,l=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yt||Math.abs(this._y1-f)>yt)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%xn+xn),h>Xu?this._append`A${r},${r},0,1,${l},${e-s},${n-c}A${r},${r},0,1,${l},${this._x1=u},${this._y1=f}`:h>yt&&this._append`A${r},${r},0,${+(h>=vn)},${l},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};var Nr={},Qe={},tn=34,qt=10,en=13;function Wi(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Uu(t,e){var n=Wi(t);return function(r,i){return e(n(r),i,t)}}function Ar(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function F(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Gu(t){return t<0?"-"+F(-t,6):t>9999?"+"+F(t,6):F(t,4)}function Ku(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Gu(t.getUTCFullYear())+"-"+F(t.getUTCMonth()+1,2)+"-"+F(t.getUTCDate(),2)+(i?"T"+F(e,2)+":"+F(n,2)+":"+F(r,2)+"."+F(i,3)+"Z":r?"T"+F(e,2)+":"+F(n,2)+":"+F(r,2)+"Z":n||e?"T"+F(e,2)+":"+F(n,2)+"Z":"")}function Zu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(l,h){var d,p,g=i(l,function(_,M){if(d)return d(_,M-1);p=_,d=h?Uu(_,h):Wi(_)});return g.columns=p||[],g}function i(l,h){var d=[],p=l.length,g=0,_=0,M,w=p<=0,$=!1;l.charCodeAt(p-1)===qt&&--p,l.charCodeAt(p-1)===en&&--p;function y(){if(w)return Qe;if($)return $=!1,Nr;var S,b=g,v;if(l.charCodeAt(b)===tn){for(;g++<p&&l.charCodeAt(g)!==tn||l.charCodeAt(++g)===tn;);return(S=g)>=p?w=!0:(v=l.charCodeAt(g++))===qt?$=!0:v===en&&($=!0,l.charCodeAt(g)===qt&&++g),l.slice(b+1,S-1).replace(/""/g,'"')}for(;g<p;){if((v=l.charCodeAt(S=g++))===qt)$=!0;else if(v===en)$=!0,l.charCodeAt(g)===qt&&++g;else if(v!==n)continue;return l.slice(b,S)}return w=!0,l.slice(b,p)}for(;(M=y())!==Qe;){for(var x=[];M!==Nr&&M!==Qe;)x.push(M),M=y();h&&(x=h(x,_++))==null||d.push(x)}return d}function a(l,h){return l.map(function(d){return h.map(function(p){return f(d[p])}).join(t)})}function o(l,h){return h==null&&(h=Ar(l)),[h.map(f).join(t)].concat(a(l,h)).join(`
`)}function s(l,h){return h==null&&(h=Ar(l)),a(l,h).join(`
`)}function c(l){return l.map(u).join(`
`)}function u(l){return l.map(f).join(t)}function f(l){return l==null?"":l instanceof Date?Ku(l):e.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:c,formatRow:u,formatValue:f}}var Ju=Zu(","),Qu=Ju.parse;function tf(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ef(t,e){return fetch(t,e).then(tf)}function nf(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),ef(e,n).then(function(i){return t(i,r)})}}var Sr=nf(Qu);function rf(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function be(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Et(t){return t=be(Math.abs(t)),t?t[1]:NaN}function af(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function of(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function we(t){if(!(e=sf.exec(t)))throw new Error("invalid format: "+t);var e;return new Bn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}we.prototype=Bn.prototype;function Bn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Bn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cf(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Yi;function uf(t,e){var n=be(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Yi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+be(t,Math.max(0,e+a-1))[0]}function Tr(t,e){var n=be(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Cr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rf,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Tr(t*100,e),r:Tr,s:uf,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Er(t){return t}var Or=Array.prototype.map,Pr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ff(t){var e=t.grouping===void 0||t.thousands===void 0?Er:af(Or.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Er:of(Or.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(l){l=we(l);var h=l.fill,d=l.align,p=l.sign,g=l.symbol,_=l.zero,M=l.width,w=l.comma,$=l.precision,y=l.trim,x=l.type;x==="n"?(w=!0,x="g"):Cr[x]||($===void 0&&($=12),y=!0,x="g"),(_||h==="0"&&d==="=")&&(_=!0,h="0",d="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b=g==="$"?r:/[%p]/.test(x)?o:"",v=Cr[x],T=/[defgprs%]/.test(x);$=$===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function C(A){var N=S,k=b,m,P,O;if(x==="c")k=v(A)+k,A="";else{A=+A;var R=A<0||1/A<0;if(A=isNaN(A)?c:v(Math.abs(A),$),y&&(A=cf(A)),R&&+A==0&&p!=="+"&&(R=!1),N=(R?p==="("?p:s:p==="-"||p==="("?"":p)+N,k=(x==="s"?Pr[8+Yi/3]:"")+k+(R&&p==="("?")":""),T){for(m=-1,P=A.length;++m<P;)if(O=A.charCodeAt(m),48>O||O>57){k=(O===46?i+A.slice(m+1):A.slice(m))+k,A=A.slice(0,m);break}}}w&&!_&&(A=e(A,1/0));var B=N.length+A.length+k.length,D=B<M?new Array(M-B+1).join(h):"";switch(w&&_&&(A=e(D+A,D.length?M-k.length:1/0),D=""),d){case"<":A=N+A+k+D;break;case"=":A=N+D+A+k;break;case"^":A=D.slice(0,B=D.length>>1)+N+A+k+D.slice(B);break;default:A=D+N+A+k;break}return a(A)}return C.toString=function(){return l+""},C}function f(l,h){var d=u((l=we(l),l.type="f",l)),p=Math.max(-8,Math.min(8,Math.floor(Et(h)/3)))*3,g=Math.pow(10,-p),_=Pr[8+p/3];return function(M){return d(g*M)+_}}return{format:u,formatPrefix:f}}var ee,Ui,Gi;lf({thousands:",",grouping:[3],currency:["$",""]});function lf(t){return ee=ff(t),Ui=ee.format,Gi=ee.formatPrefix,ee}function hf(t){return Math.max(0,-Et(Math.abs(t)))}function df(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Et(e)/3)))*3-Et(Math.abs(t)))}function pf(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Et(e)-Et(t))+1}function Hn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Rr=Symbol("implicit");function Fn(){var t=new cr,e=[],n=[],r=Rr;function i(a){let o=t.get(a);if(o===void 0){if(r!==Rr)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new cr;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Fn(e,n).unknown(r)},Hn.apply(i,arguments),i}function Ki(){var t=Fn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,c=0,u=0,f=.5;delete t.unknown;function l(){var h=e().length,d=i<r,p=d?i:r,g=d?r:i;a=(g-p)/Math.max(1,h-c+u*2),s&&(a=Math.floor(a)),p+=(g-p-a*(h-c))*f,o=a*(1-c),s&&(p=Math.round(p),o=Math.round(o));var _=yo(h).map(function(M){return p+a*M});return n(d?_.reverse():_)}return t.domain=function(h){return arguments.length?(e(h),l()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,l()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,l()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,l()):s},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),l()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),l()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,l()):u},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),l()):f},t.copy=function(){return Ki(e(),[r,i]).round(s).paddingInner(c).paddingOuter(u).align(f)},Hn.apply(l(),arguments)}function Zi(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Zi(e())},t}function gf(){return Zi(Ki.apply(null,arguments).paddingInner(1))}function yf(t){return function(){return t}}function _f(t){return+t}var Dr=[0,1];function Mt(t){return t}function bn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yf(isNaN(e)?NaN:.5)}function mf(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function vf(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=bn(i,r),a=n(o,a)):(r=bn(r,i),a=n(a,o)),function(s){return a(r(s))}}function xf(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=bn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var c=ao(t,s,1,r)-1;return a[c](i[c](s))}}function bf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wf(){var t=Dr,e=Dr,n=Dn,r,i,a,o=Mt,s,c,u;function f(){var h=Math.min(t.length,e.length);return o!==Mt&&(o=mf(t[0],t[h-1])),s=h>2?xf:vf,c=u=null,l}function l(h){return h==null||isNaN(h=+h)?a:(c||(c=s(t.map(r),e,n)))(r(o(h)))}return l.invert=function(h){return o(i((u||(u=s(e,t.map(r),K)))(h)))},l.domain=function(h){return arguments.length?(t=Array.from(h,_f),f()):t.slice()},l.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},l.rangeRound=function(h){return e=Array.from(h),n=Sc,f()},l.clamp=function(h){return arguments.length?(o=h?!0:Mt,f()):o!==Mt},l.interpolate=function(h){return arguments.length?(n=h,f()):n},l.unknown=function(h){return arguments.length?(a=h,l):a},function(h,d){return r=h,i=d,f()}}function $f(){return wf()(Mt,Mt)}function Mf(t,e,n,r){var i=po(t,e,n),a;switch(r=we(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=df(i,o))&&(r.precision=a),Gi(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=pf(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=hf(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ui(r)}function kf(t){var e=t.domain;return t.ticks=function(n){var r=e();return ho(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Mf(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],c,u,f=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);f-- >0;){if(u=fn(o,s,n),u===c)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function Ji(){var t=$f();return t.copy=function(){return bf(t,Ji())},Hn.apply(t,arguments),kf(t)}function ne(t){return function(){return t}}const Nf=Math.sqrt,Qi=Math.PI,Af=2*Qi;function Sf(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Yu(e)}const ta={draw(t,e){const n=Nf(e/Qi);t.moveTo(n,0),t.arc(0,0,n,0,Af)}};function Tf(t,e){let n=null,r=Sf(i);t=typeof t=="function"?t:ne(t||ta),e=typeof e=="function"?e:ne(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:ne(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:ne(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function zt(t,e,n){this.k=t,this.x=e,this.y=n}zt.prototype={constructor:zt,scale:function(t){return t===1?this:new zt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new zt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};zt.prototype;var wn="http://www.w3.org/1999/xhtml";const Ir={svg:"http://www.w3.org/2000/svg",xhtml:wn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ea(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ir.hasOwnProperty(e)?{space:Ir[e],local:t}:t}function Cf(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wn&&e.documentElement.namespaceURI===wn?e.createElement(t):e.createElementNS(n,t)}}function Ef(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function na(t){var e=ea(t);return(e.local?Ef:Cf)(e)}function Of(){}function ra(t){return t==null?Of:function(){return this.querySelector(t)}}function Pf(t){typeof t!="function"&&(t=ra(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new Y(r,this._parents)}function Rf(){return[]}function Df(t){return t==null?Rf:function(){return this.querySelectorAll(t)}}function If(t){typeof t!="function"&&(t=Df(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(r.push(t.call(c,c.__data__,u,o)),i.push(c));return new Y(r,i)}function Lf(t){return function(){return this.matches(t)}}function qf(t){typeof t!="function"&&(t=Lf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new Y(r,this._parents)}function ia(t){return new Array(t.length)}function Bf(){return new Y(this._enter||this._groups.map(ia),this._parents)}function $e(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}$e.prototype={constructor:$e,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Hf(t){return function(){return t}}var Lr="$";function Ff(t,e,n,r,i,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new $e(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function jf(t,e,n,r,i,a,o){var s,c,u={},f=e.length,l=a.length,h=new Array(f),d;for(s=0;s<f;++s)(c=e[s])&&(h[s]=d=Lr+o.call(c,c.__data__,s,e),d in u?i[s]=c:u[d]=c);for(s=0;s<l;++s)d=Lr+o.call(t,a[s],s,a),(c=u[d])?(r[s]=c,c.__data__=a[s],u[d]=null):n[s]=new $e(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u[h[s]]===c&&(i[s]=c)}function zf(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each(function(S){d[++u]=S}),d;var n=e?jf:Ff,r=this._parents,i=this._groups;typeof t!="function"&&(t=Hf(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=r[u],l=i[u],h=l.length,d=t.call(f,f&&f.__data__,u,r),p=d.length,g=s[u]=new Array(p),_=o[u]=new Array(p),M=c[u]=new Array(h);n(f,l,g,_,M,d,e);for(var w=0,$=0,y,x;w<p;++w)if(y=g[w]){for(w>=$&&($=w+1);!(x=_[$])&&++$<p;);y._next=x||null}}return o=new Y(o,r),o._enter=s,o._exit=c,o}function Vf(){return new Y(this._exit||this._groups.map(ia),this._parents)}function Xf(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Wf(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,l=o[s]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;s<r;++s)o[s]=e[s];return new Y(o,this._parents)}function Yf(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Uf(t){t||(t=Gf);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new Y(i,this._parents).order()}function Gf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Kf(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Zf(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Jf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Qf(){var t=0;return this.each(function(){++t}),t}function tl(){return!this.node()}function el(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function nl(t){return function(){this.removeAttribute(t)}}function rl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function il(t,e){return function(){this.setAttribute(t,e)}}function al(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ol(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function sl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function cl(t,e){var n=ea(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?rl:nl:typeof e=="function"?n.local?sl:ol:n.local?al:il)(n,e))}function aa(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ul(t){return function(){this.style.removeProperty(t)}}function fl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ll(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function hl(t,e,n){return arguments.length>1?this.each((e==null?ul:typeof e=="function"?ll:fl)(t,e,n??"")):dl(this.node(),t)}function dl(t,e){return t.style.getPropertyValue(e)||aa(t).getComputedStyle(t,null).getPropertyValue(e)}function pl(t){return function(){delete this[t]}}function gl(t,e){return function(){this[t]=e}}function yl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function _l(t,e){return arguments.length>1?this.each((e==null?pl:typeof e=="function"?yl:gl)(t,e)):this.node()[t]}function oa(t){return t.trim().split(/^|\s+/)}function jn(t){return t.classList||new sa(t)}function sa(t){this._node=t,this._names=oa(t.getAttribute("class")||"")}sa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ca(t,e){for(var n=jn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ua(t,e){for(var n=jn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ml(t){return function(){ca(this,t)}}function vl(t){return function(){ua(this,t)}}function xl(t,e){return function(){(e.apply(this,arguments)?ca:ua)(this,t)}}function bl(t,e){var n=oa(t+"");if(arguments.length<2){for(var r=jn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?xl:e?ml:vl)(n,e))}function wl(){this.textContent=""}function $l(t){return function(){this.textContent=t}}function Ml(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function kl(t){return arguments.length?this.each(t==null?wl:(typeof t=="function"?Ml:$l)(t)):this.node().textContent}function Nl(){this.innerHTML=""}function Al(t){return function(){this.innerHTML=t}}function Sl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Tl(t){return arguments.length?this.each(t==null?Nl:(typeof t=="function"?Sl:Al)(t)):this.node().innerHTML}function Cl(){this.nextSibling&&this.parentNode.appendChild(this)}function El(){return this.each(Cl)}function Ol(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pl(){return this.each(Ol)}function Rl(t){var e=typeof t=="function"?t:na(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Dl(){return null}function Il(t,e){var n=typeof t=="function"?t:na(t),r=e==null?Dl:typeof e=="function"?e:ra(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ll(){var t=this.parentNode;t&&t.removeChild(this)}function ql(){return this.each(Ll)}function Bl(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Hl(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Fl(t){return this.select(t?Hl:Bl)}function jl(t){return arguments.length?this.property("__data__",t):this.node().__data__}var fa={},E=null;if(typeof document<"u"){var zl=document.documentElement;"onmouseenter"in zl||(fa={mouseenter:"mouseover",mouseleave:"mouseout"})}function Vl(t,e,n){return t=la(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function la(t,e,n){return function(r){var i=E;E=r;try{t.call(this,this.__data__,e,n)}finally{E=i}}}function Xl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Wl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function Yl(t,e,n){var r=fa.hasOwnProperty(t.type)?Vl:la;return function(i,a,o){var s=this.__on,c,u=r(e,a,o);if(s){for(var f=0,l=s.length;f<l;++f)if((c=s[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=n),c.value=e;return}}this.addEventListener(t.type,u,n),c={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(c):this.__on=[c]}}function Ul(t,e,n){var r=Xl(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(i=0,f=s[c];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?Yl:Wl,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function qr(t,e,n,r){var i=E;t.sourceEvent=E,E=t;try{return e.apply(n,r)}finally{E=i}}function ha(t,e,n){var r=aa(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Gl(t,e){return function(){return ha(this,t,e)}}function Kl(t,e){return function(){return ha(this,t,e.apply(this,arguments))}}function Zl(t,e){return this.each((typeof e=="function"?Kl:Gl)(t,e))}var Jl=[null];function Y(t,e){this._groups=t,this._parents=e}Y.prototype={constructor:Y,select:Pf,selectAll:If,filter:qf,data:zf,enter:Bf,exit:Vf,join:Xf,merge:Wf,order:Yf,sort:Uf,call:Kf,nodes:Zf,node:Jf,size:Qf,empty:tl,each:el,attr:cl,style:hl,property:_l,classed:bl,text:kl,html:Tl,raise:El,lower:Pl,append:Rl,insert:Il,remove:ql,clone:Fl,datum:jl,on:Ul,dispatch:Zl};function ht(t){return typeof t=="string"?new Y([[document.querySelector(t)]],[document.documentElement]):new Y([[t]],Jl)}var Ql=0;function Br(){this._="@"+(++Ql).toString(36)}Br.prototype={constructor:Br,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function da(){for(var t=E,e;e=t.sourceEvent;)t=e;return t}function pa(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function th(t){var e=da();return e.changedTouches&&(e=e.changedTouches[0]),pa(t,e)}function eh(t,e,n){arguments.length<3&&(n=e,e=da().changedTouches);for(var r=0,i=e?e.length:0,a;r<i;++r)if((a=e[r]).identifier===n)return pa(t,a);return null}var nh={value:function(){}};function zn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new le(n)}function le(t){this._=t}function rh(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}le.prototype=zn.prototype={constructor:le,on:function(t,e){var n=this._,r=rh(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=ih(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Hr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Hr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new le(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function ih(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Hr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=nh,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}function nn(){E.stopImmediatePropagation()}function Nt(){E.preventDefault(),E.stopImmediatePropagation()}function ah(t){var e=t.document.documentElement,n=ht(t).on("dragstart.drag",Nt,!0);"onselectstart"in e?n.on("selectstart.drag",Nt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function oh(t,e){var n=t.document.documentElement,r=ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",Nt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function re(t){return function(){return t}}function $n(t,e,n,r,i,a,o,s,c,u){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=c,this._=u}$n.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function sh(){return!E.button}function ch(){return this.parentNode}function uh(t){return t??{x:E.x,y:E.y}}function fh(){return"ontouchstart"in this}function ga(){var t=sh,e=ch,n=uh,r=fh,i={},a=zn("start","drag","end"),o=0,s,c,u,f,l=0;function h(y){y.on("mousedown.drag",d).filter(r).on("touchstart.drag",_).on("touchmove.drag",M).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!(f||!t.apply(this,arguments))){var y=$("mouse",e.apply(this,arguments),th,this,arguments);y&&(ht(E.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),ah(E.view),nn(),u=!1,s=E.clientX,c=E.clientY,y("start"))}}function p(){if(Nt(),!u){var y=E.clientX-s,x=E.clientY-c;u=y*y+x*x>l}i.mouse("drag")}function g(){ht(E.view).on("mousemove.drag mouseup.drag",null),oh(E.view,u),Nt(),i.mouse("end")}function _(){if(t.apply(this,arguments)){var y=E.changedTouches,x=e.apply(this,arguments),S=y.length,b,v;for(b=0;b<S;++b)(v=$(y[b].identifier,x,eh,this,arguments))&&(nn(),v("start"))}}function M(){var y=E.changedTouches,x=y.length,S,b;for(S=0;S<x;++S)(b=i[y[S].identifier])&&(Nt(),b("drag"))}function w(){var y=E.changedTouches,x=y.length,S,b;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),S=0;S<x;++S)(b=i[y[S].identifier])&&(nn(),b("end"))}function $(y,x,S,b,v){var T=S(x,y),C,A,N,k=a.copy();if(qr(new $n(h,"beforestart",C,y,o,T[0],T[1],0,0,k),function(){return(E.subject=C=n.apply(b,v))==null?!1:(A=C.x-T[0]||0,N=C.y-T[1]||0,!0)}))return function m(P){var O=T,R;switch(P){case"start":i[y]=m,R=o++;break;case"end":delete i[y],--o;case"drag":T=S(x,y),R=o;break}qr(new $n(h,P,C,y,R,T[0]+A,T[1]+N,T[0]-O[0],T[1]-O[1],k),k.apply,k,[P,b,v])}}return h.filter=function(y){return arguments.length?(t=typeof y=="function"?y:re(!!y),h):t},h.container=function(y){return arguments.length?(e=typeof y=="function"?y:re(y),h):e},h.subject=function(y){return arguments.length?(n=typeof y=="function"?y:re(y),h):n},h.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:re(!!y),h):r},h.on=function(){var y=a.on.apply(a,arguments);return y===a?h:y},h.clickDistance=function(y){return arguments.length?(l=(y=+y)*y,h):Math.sqrt(l)},h}var Mn=Math.PI,kn=2*Mn,_t=1e-6,lh=kn-_t;function Nn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Vn(){return new Nn}Nn.prototype=Vn.prototype={constructor:Nn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,c=r-e,u=a-t,f=o-e,l=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>_t)if(!(Math.abs(f*s-c*u)>_t)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-a,d=r-o,p=s*s+c*c,g=h*h+d*d,_=Math.sqrt(p),M=Math.sqrt(l),w=i*Math.tan((Mn-Math.acos((p+l-g)/(2*_*M)))/2),$=w/M,y=w/_;Math.abs($-1)>_t&&(this._+="L"+(t+$*u)+","+(e+$*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>u*d)+","+(this._x1=t+y*s)+","+(this._y1=e+y*c)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),c=t+o,u=e+s,f=1^a,l=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>_t||Math.abs(this._y1-u)>_t)&&(this._+="L"+c+","+u),n&&(l<0&&(l=l%kn+kn),l>lh?this._+="A"+n+","+n+",0,1,"+f+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=c)+","+(this._y1=u):l>_t&&(this._+="A"+n+","+n+",0,"+ +(l>=Mn)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function W(t){return function(){return t}}var I=1e-12,Me=Math.PI,ke=Me/2,hh=2*Me;function dh(t){return t.innerRadius}function ph(t){return t.outerRadius}function gh(t){return t.startAngle}function yh(t){return t.endAngle}function _h(t){return t&&t.padAngle}function Fr(t){return t>=1?ke:t<=-1?-ke:Math.asin(t)}function mh(t,e,n,r,i,a,o,s){var c=n-t,u=r-e,f=o-i,l=s-a,h=(f*(e-a)-l*(t-i))/(l*c-f*u);return[t+h*c,e+h*u]}function ie(t,e,n,r,i,a,o){var s=t-n,c=e-r,u=(o?a:-a)/Math.sqrt(s*s+c*c),f=u*c,l=-u*s,h=t+f,d=e+l,p=n+f,g=r+l,_=(h+p)/2,M=(d+g)/2,w=p-h,$=g-d,y=w*w+$*$,x=i-a,S=h*g-p*d,b=($<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-S*S)),v=(S*$-w*b)/y,T=(-S*w-$*b)/y,C=(S*$+w*b)/y,A=(-S*w+$*b)/y,N=v-_,k=T-M,m=C-_,P=A-M;return N*N+k*k>m*m+P*P&&(v=C,T=A),{cx:v,cy:T,x01:-f,y01:-l,x11:v*(i/x-1),y11:T*(i/x-1)}}function vh(){var t=dh,e=ph,n=W(0),r=null,i=gh,a=yh,o=_h,s=null;function c(){var u,f,l=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-ke,p=a.apply(this,arguments)-ke,g=Math.abs(p-d),_=p>d;if(s||(s=u=Vn()),h<l&&(f=h,h=l,l=f),!(h>I))s.moveTo(0,0);else if(g>hh-I)s.moveTo(h*Math.cos(d),h*Math.sin(d)),s.arc(0,0,h,d,p,!_),l>I&&(s.moveTo(l*Math.cos(p),l*Math.sin(p)),s.arc(0,0,l,p,d,_));else{var M=d,w=p,$=d,y=p,x=g,S=g,b=o.apply(this,arguments)/2,v=b>I&&(r?+r.apply(this,arguments):Math.sqrt(l*l+h*h)),T=Math.min(Math.abs(h-l)/2,+n.apply(this,arguments)),C=T,A=T,N,k;if(v>I){var m=Fr(v/l*Math.sin(b)),P=Fr(v/h*Math.sin(b));(x-=m*2)>I?(m*=_?1:-1,$+=m,y-=m):(x=0,$=y=(d+p)/2),(S-=P*2)>I?(P*=_?1:-1,M+=P,w-=P):(S=0,M=w=(d+p)/2)}var O=h*Math.cos(M),R=h*Math.sin(M),B=l*Math.cos(y),D=l*Math.sin(y);if(T>I){var H=h*Math.cos(w),Q=h*Math.sin(w),L=l*Math.cos($),G=l*Math.sin($);if(g<Me){var tt=x>I?mh(O,R,L,G,H,Q,B,D):[B,D],Ve=O-tt[0],Xe=R-tt[1],We=H-tt[0],Ye=Q-tt[1],or=1/Math.sin(Math.acos((Ve*We+Xe*Ye)/(Math.sqrt(Ve*Ve+Xe*Xe)*Math.sqrt(We*We+Ye*Ye)))/2),sr=Math.sqrt(tt[0]*tt[0]+tt[1]*tt[1]);C=Math.min(T,(l-sr)/(or-1)),A=Math.min(T,(h-sr)/(or+1))}}S>I?A>I?(N=ie(L,G,O,R,h,A,_),k=ie(H,Q,B,D,h,A,_),s.moveTo(N.cx+N.x01,N.cy+N.y01),A<T?s.arc(N.cx,N.cy,A,Math.atan2(N.y01,N.x01),Math.atan2(k.y01,k.x01),!_):(s.arc(N.cx,N.cy,A,Math.atan2(N.y01,N.x01),Math.atan2(N.y11,N.x11),!_),s.arc(0,0,h,Math.atan2(N.cy+N.y11,N.cx+N.x11),Math.atan2(k.cy+k.y11,k.cx+k.x11),!_),s.arc(k.cx,k.cy,A,Math.atan2(k.y11,k.x11),Math.atan2(k.y01,k.x01),!_))):(s.moveTo(O,R),s.arc(0,0,h,M,w,!_)):s.moveTo(O,R),!(l>I)||!(x>I)?s.lineTo(B,D):C>I?(N=ie(B,D,H,Q,l,-C,_),k=ie(O,R,L,G,l,-C,_),s.lineTo(N.cx+N.x01,N.cy+N.y01),C<T?s.arc(N.cx,N.cy,C,Math.atan2(N.y01,N.x01),Math.atan2(k.y01,k.x01),!_):(s.arc(N.cx,N.cy,C,Math.atan2(N.y01,N.x01),Math.atan2(N.y11,N.x11),!_),s.arc(0,0,l,Math.atan2(N.cy+N.y11,N.cx+N.x11),Math.atan2(k.cy+k.y11,k.cx+k.x11),_),s.arc(k.cx,k.cy,C,Math.atan2(k.y11,k.x11),Math.atan2(k.y01,k.x01),!_))):s.arc(0,0,l,y,$,_)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Me/2;return[Math.cos(f)*u,Math.sin(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:W(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:W(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:W(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:W(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:W(+u),c):i},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:W(+u),c):a},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:W(+u),c):o},c.context=function(u){return arguments.length?(s=u??null,c):s},c}function ya(t){this._context=t}ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function _a(t){return new ya(t)}function xh(t){return t[0]}function bh(t){return t[1]}function wh(){var t=xh,e=bh,n=W(!0),r=null,i=_a,a=null;function o(s){var c,u=s.length,f,l=!1,h;for(r==null&&(a=i(h=Vn())),c=0;c<=u;++c)!(c<u&&n(f=s[c],c,s))===l&&((l=!l)?a.lineStart():a.lineEnd()),l&&a.point(+t(f,c,s),+e(f,c,s));if(h)return a=null,h+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:W(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:W(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:W(!!s),o):n},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function Ne(){}function jr(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Xn(t){this._context=t}Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jr(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ma(t,e){this._basis=new Xn(t),this._beta=e}ma.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+c*a),this._beta*e[s]+(1-this._beta)*(i+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new Xn(r):new ma(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function Ae(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Wn(t,e){this._context=t,this._k=(1-e)/6}Wn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ae(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ae(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Wn(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Yn(t,e){this._context=t,this._k=(1-e)/6}Yn.prototype={areaStart:Ne,areaEnd:Ne,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ae(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Yn(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Un(t,e){this._context=t,this._k=(1-e)/6}Un.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ae(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Un(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Gn(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>I){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>I){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/f,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function va(t,e){this._context=t,this._alpha=e}va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Gn(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const $h=function t(e){function n(r){return e?new va(r,e):new Wn(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function xa(t,e){this._context=t,this._alpha=e}xa.prototype={areaStart:Ne,areaEnd:Ne,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Gn(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new xa(r,e):new Yn(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function ba(t,e){this._context=t,this._alpha=e}ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gn(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new ba(r,e):new Un(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function zr(t){return t<0?-1:1}function Vr(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(zr(a)+zr(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Xr(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function rn(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function An(t){this._context=t}An.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rn(this,this._t0,Xr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rn(this,Xr(this,n=Vr(this,t,e)),n);break;default:rn(this,this._t0,n=Vr(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(An.prototype).point=function(t,e){An.prototype.point.call(this,e,t)};var Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Dt=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},Kn=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Zn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},kh=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)},Nh=function(){function t(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.nx,s=e.ny,c=e.dy,u=c===void 0?0:c,f=e.dx,l=f===void 0?0:f,h=e.color,d=h===void 0?"grey":h,p=e.data,g=e.type,_=e.subject,M=e.connector,w=e.note,$=e.disable,y=e.id,x=e.className;Rt(this,t),this._dx=o!==void 0?o-r:l,this._dy=s!==void 0?s-a:u,this._x=r,this._y=a,this._color=d,this.id=y,this._className=x||"",this._type=g||"",this.data=p,this.note=w||{},this.connector=M||{},this.subject=_||{},this.disable=$||[]}return Dt(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(n){this._className=n,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(n){this._type=n,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(n){this._x=n,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(n){this._color=n,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(n){this._dx=n,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(n){this._dy=n,this.updateOffset()}},{key:"nx",set:function(n){this._dx=n-this._x,this.updateOffset()}},{key:"ny",set:function(n){this._dy=n-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(n){var r=n.x,i=n.y;this._dx=r,this._dy=i,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(n){var r=n.x,i=n.y;this._x=r,this._y=i,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(n.data=this.data),this.type&&(n.type=this.type),this._className&&(n.className=this._className),Object.keys(this.connector).length>0&&(n.connector=this.connector),Object.keys(this.subject).length>0&&(n.subject=this.subject),Object.keys(this.note).length>0&&(n.note=this.note),n}}]),t}(),Ah=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;Rt(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return Dt(t,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(r){r.type=void 0,r.subject=n&&n.subject||r.subject,r.connector=n&&n.connector||r.connector,r.note=n&&n.note||r.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(r){r.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.editMode=n,r.type.updateEditMode())})}},{key:"updateDisable",value:function(n){this.annotations.forEach(function(r){r.disable=n,r.type&&n.forEach(function(i){r.type[i]&&(r.type[i].remove&&r.type[i].remove(),r.type[i]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(r){r.type&&r.type.updateTextWrap&&r.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(n){n.type&&n.type.drawText&&n.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.notePadding=n)})}},{key:"json",get:function(){var n=this;return this.annotations.map(function(r){var i=r.json;return n.accessorsInverse&&r.data&&(i.data={},Object.keys(n.accessorsInverse).forEach(function(a){i.data[a]=n.accessorsInverse[a]({x:r.x,y:r.y})})),i})}},{key:"noteNodes",get:function(){return this.annotations.map(function(n){return j({},n.type.getNoteBBoxOffset(),{positionX:n.x,positionY:n.y})})}}]),t}(),Sh=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i;return{move:{x:r,y:a}}},Th=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r1,s=e.r2,c=e.padding,u={move:{x:r,y:a}};return o!==void 0&&(u.r1={x:r+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}),s!==void 0&&(u.r2={x:r+s/Math.sqrt(2),y:a+s/Math.sqrt(2)}),c!==void 0&&(u.padding={x:r+o+c,y:a}),u},Ch=function(e){var n=e.group,r=e.handles,i=e.r,a=i===void 0?10:i,o=n.selectAll("circle.handle").data(r);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(ga().container(ht("g.annotations").node()).on("start",function(s){return s.start&&s.start(s)}).on("drag",function(s){return s.drag&&s.drag(s)}).on("end",function(s){return s.end&&s.end(s)})),n.selectAll("circle.handle").attr("cx",function(s){return s.x}).attr("cy",function(s){return s.y}).attr("r",function(s){return s.r||a}).attr("class",function(s){return"handle "+(s.className||"")}),o.exit().remove()},wa=function(e,n){return(e==="dynamic"||e==="left"||e==="right")&&(n<0?e="top":e="bottom"),e},$a=function(e,n){return(e==="dynamic"||e==="top"||e==="bottom")&&(n<0?e="right":e="left"),e},Eh=["topBottom","top","bottom"],Oh=["leftRight","left","right"],Ph=function(t){var e=t.padding,n=e===void 0?0:e,r=t.bbox,i=r===void 0?{x:0,width:0,height:0}:r,a=t.align,o=t.orientation,s=t.offset,c=s===void 0?{x:0,y:0}:s,u=-i.x,f=0;return Eh.indexOf(o)!==-1?(a=$a(a,c.x),c.y<0&&o==="topBottom"||o==="top"?f-=i.height+n:f+=n,a==="middle"?u-=i.width/2:a==="right"&&(u-=i.width)):Oh.indexOf(o)!==-1&&(a=wa(a,c.y),c.x<0&&o==="leftRight"||o==="left"?u-=i.width+n:u+=n,a==="middle"?f-=i.height/2:a==="top"&&(f-=i.height)),{x:u,y:f}},ot=function(e){var n=e.data,r=e.curve,i=r===void 0?_a:r,a=e.canvasContext,o=e.className,s=e.classID,c=wh().curve(i),u={type:"path",className:o,classID:s,data:n};return a?(c.context(a),u.pathMethods=c):u.attrs={d:c(n)},u},Se=function(e){var n=e.data,r=e.canvasContext,i=e.className,a=e.classID,o={type:"path",className:i,classID:a,data:n},s=vh().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return r?(s.context(r),o.pathMethods=lineGen):o.attrs={d:s()},o},Rh=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.bbox,s=t.offset;e=wa(e,s.y),e==="top"?a-=o.height:e==="middle"&&(a-=o.height/2);var c=[[r,a],[r,a+o.height]];return{components:[ot({data:c,className:"note-line"})]}},Dh=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.offset,s=t.bbox;e=$a(e,o.x),e==="right"?r-=s.width:e==="middle"&&(r-=s.width/2);var c=[[r,a],[r+s.width,a]];return{components:[ot({data:c,className:"note-line"})]}},Ma=function(e){var n=e.type,r=e.subjectType,i=n.annotation,a=i.position,o=i.x-a.x,s=o+i.dx,c=i.y-a.y,u=c+i.dy,f=i.subject;if(r==="circle"&&(f.outerRadius||f.radius)){var l=Math.sqrt((o-s)*(o-s)+(c-u)*(c-u)),h=Math.asin(-u/l),d=f.outerRadius||f.radius+(f.radiusPadding||0);o=Math.abs(Math.cos(h)*d)*(s<0?-1:1),c=Math.abs(Math.sin(h)*d)*(u<0?-1:1)}if(r==="rect"){var p=f.width,g=f.height;(p>0&&i.dx>0||p<0&&i.dx<0)&&(Math.abs(p)>Math.abs(i.dx)?o=p/2:o=p),(g>0&&i.dy>0||g<0&&i.dy<0)&&(Math.abs(g)>Math.abs(i.dy)?c=g/2:c=g),o===p/2&&c===g/2&&(o=s,c=u)}return[[o,c],[s,u]]},Ih=function(t){var e=Ma(t);return{components:[ot({data:e,className:"connector"})]}},Lh=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,s=r.y-i.y,c=s+r.dy,u=r.subject;if(n==="rect"){var f=u.width,l=u.height;(f>0&&r.dx>0||f<0&&r.dx<0)&&(Math.abs(f)>Math.abs(r.dx)?a=f/2:a=f),(l>0&&r.dy>0||l<0&&r.dy<0)&&(Math.abs(l)>Math.abs(r.dy)?s=l/2:s=l),a===f/2&&s===l/2&&(a=o,s=c)}var h=[[a,s],[o,c]],d=c-s,p=o-a,g=o,_=c,M=c<s&&o>a||o<a&&c>s?-1:1;if(Math.abs(p)<Math.abs(d)?(g=o,_=s+p*M):(_=c,g=a+d*M),n==="circle"&&(u.outerRadius||u.radius)){var w=(u.outerRadius||u.radius)+(u.radiusPadding||0),$=w/Math.sqrt(2);if(Math.abs(p)>$&&Math.abs(d)>$)a=$*(o<0?-1:1),s=$*(c<0?-1:1),h=[[a,s],[g,_],[o,c]];else if(Math.abs(p)>Math.abs(d)){var y=Math.asin(-c/w);a=Math.abs(Math.cos(y)*w)*(o<0?-1:1),h=[[a,c],[o,c]]}else{var x=Math.acos(o/w);s=Math.abs(Math.sin(x)*w)*(c<0?-1:1),h=[[o,s],[o,c]]}}else h=[[a,s],[g,_],[o,c]];return{components:[ot({data:h,className:"connector"})]}},qh=function(t){var e=t.type,n=t.connectorData,r=t.subjectType;n||(n={}),(!n.points||typeof n.points=="number")&&(n.points=Bh(e.annotation.offset,n.points)),n.curve||(n.curve=$h);var i=[];if(e.editMode){var a=n.points.map(function(u,f){return j({},Sh({cx:u[0],cy:u[1]}),{index:f})}),o=function(f){n.points[f][0]+=E.dx,n.points[f][1]+=E.dy,e.redrawConnector()};i=e.mapHandles(a.map(function(u){return j({},u.move,{drag:o.bind(e,u.index)})}))}var s=Ma({type:e,subjectType:r});s=[s[0]].concat(kh(n.points),[s[1]]);var c=[ot({data:s,curve:n.curve,className:"connector"})];return{components:c,handles:i}},Bh=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r={x:e.x/(n+1),y:e.y/(n+1)},i=[],a=1;a<=n;a++)i.push([r.x*a+a%2*20,r.y*a-a%2*20]);return i},Hh=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,a=i===void 0?1:i,o=e.position;n?n=[-r[0]+n[0],-r[1]+n[1]]:n=[e.dx,e.dy],r||(r=[e.x-o.x,e.y-o.y]);var s=r[0],c=r[1],u=n[0],f=n[1],l=10*a,h=16/180*Math.PI,d=Math.atan(f/u);u<0&&(d+=Math.PI);var p=[[s,c],[Math.cos(d+h)*l+s,Math.sin(d+h)*l+c],[Math.cos(d-h)*l+s,Math.sin(d-h)*l+c],[s,c]];return{components:[ot({data:p,className:"connector-end connector-arrow",classID:"connector-end"})]}},Fh=function(t){var e=t.line,n=t.scale,r=n===void 0?1:n,i=Se({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}},jh=function(t){var e=t.subjectData,n=t.type;!e.radius&&!e.outerRadius&&(e.radius=20);var r=[],i=Se({data:e,className:"subject"});if(n.editMode){var a=Th({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:e.radiusPadding}),o=function(u){var f=e[u]+E.dx*Math.sqrt(2);e[u]=f,n.redrawSubject(),n.redrawConnector()},s=[j({},a.r1,{drag:o.bind(n,e.outerRadius!==void 0?"outerRadius":"radius")})];e.innerRadius&&s.push(j({},a.r2,{drag:o.bind(n,"innerRadius")})),r=n.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},zh=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var r=[],i=e.width,a=e.height,o=[[0,0],[i,0],[i,a],[0,a],[0,0]],s=ot({data:o,className:"subject"});if(n.editMode){var c=function(){e.width=E.x,n.redrawSubject(),n.redrawConnector()},u=function(){e.height=E.y,n.redrawSubject(),n.redrawConnector()},f=[{x:i,y:a/2,drag:c.bind(n)},{x:i/2,y:a,drag:u.bind(n)}];r=n.mapHandles(f)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:r}},Vh=function(t){var e=t.subjectData,n=t.type,r=n.annotation.position,i=(e.x1!==void 0?e.x1:r.x)-r.x,a=(e.x2!==void 0?e.x2:r.x)-r.x,o=(e.y1!==void 0?e.y1:r.y)-r.y,s=(e.y2!==void 0?e.y2:r.y)-r.y,c=[[i,o],[a,s]];return{components:[ot({data:c,className:"subject"})]}},Xh=function(t){var e=t.subjectData,n=e===void 0?{}:e,r=t.type,i=r===void 0?{}:r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.typeSettings&&i.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var s=[],c=[],u=n.radius,f=u*.7,l=0,h=0,d=Math.sqrt(2)*u,p={xleftcorner:-u,xrightcorner:u,ytopcorner:-u,ybottomcorner:u,xleft:-d,xright:d,ytop:-d,ybottom:d};n.x&&!n.y?l=p["x"+n.x]:n.y&&!n.x?h=p["y"+n.y]:n.x&&n.y&&(l=p["x"+n.x+"corner"],h=p["y"+n.y+"corner"]);var g="translate("+l+", "+h+")",_=Se({className:"subject",data:{radius:u}});_.attrs.transform=g,_.attrs.fill=a.color,_.attrs["stroke-linecap"]="round",_.attrs["stroke-width"]="3px";var M=Se({className:"subject-ring",data:{outerRadius:u,innerRadius:f}});M.attrs.transform=g,M.attrs["stroke-width"]="3px",M.attrs.fill="white";var w=void 0;if(l&&h||!l&&!h)w=ot({className:"subject-pointer",data:[[0,0],[l||0,0],[0,h||0],[0,0]]});else if(l||h){var $=function(v){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return v&&v/Math.sqrt(2)/Math.sqrt(2)||T*u/Math.sqrt(2)};w=ot({className:"subject-pointer",data:[[0,0],[$(l),$(h)],[$(l,-1),$(h,-1)],[0,0]]})}if(w&&(w.attrs.fill=a.color,w.attrs["stroke-linecap"]="round",w.attrs["stroke-width"]="3px",c.push(w)),i.editMode){var y=function(){n.x=E.x<-u*2?"left":E.x>u*2?"right":void 0,n.y=E.y<-u*2?"top":E.y>u*2?"bottom":void 0,i.redrawSubject()},x={x:l*2,y:h*2,drag:y.bind(i)};!x.x&&!x.y&&(x.y=-u),s=i.mapHandles([x])}var S=void 0;return n.text&&(S={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:l,y:h}}),c.push(_),c.push(M),c.push(S),{components:c,handles:s}},ka=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,a=e.dispatcher,o=e.notePadding,s=e.accessors;if(Rt(this,t),this.a=n,this.note=r.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=a,a){var c=Yh.bind(null,a,r);c({component:this.note,name:"note"}),c({component:this.connector,name:"connector"}),c({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=o!==void 0?o:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return Dt(t,[{key:"init",value:function(n){this.annotation.x||this.mapX(n),this.annotation.y||this.mapY(n)}},{key:"mapY",value:function(n){n.y&&(this.annotation.y=n.y(this.annotation.data))}},{key:"mapX",value:function(n){n.x&&(this.annotation.x=n.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(n,r){var i=this;Array.isArray(r)||(r=[r]),r.filter(function(a){return a}).forEach(function(a){var o=a.type,s=a.className,c=a.attrs,u=a.handles,f=a.classID;if(o==="handle")Ch({group:n,r:c&&c.r,handles:u});else{nt(n,[i.annotation],o,s,f);for(var l=n.select(o+"."+(f||s)),h=Object.keys(c),d=[],p=l.node().attributes,g=p.length-1;g>=0;g--){var _=p[g].name;h.indexOf(_)===-1&&_!=="class"&&d.push(_)}h.forEach(function(M){M==="text"?l.text(c[M]):l.attr(M,c[M])}),d.forEach(function(M){return l.attr(M,null)})}})}},{key:"getNoteBBox",value:function(){return Yr(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var n=Yr(this.note,".annotation-note-content"),r=this.noteContent.attr("transform").split(/\(|\,|\)/g);return n.offsetCornerX=parseFloat(r[1])+this.annotation.dx,n.offsetCornerY=parseFloat(r[2])+this.annotation.dy,n.offsetX=this.annotation.dx,n.offsetY=this.annotation.dy,n}},{key:"drawSubject",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.subject,a=r.type,o={type:this,subjectData:i},s={};a==="circle"?s=jh(o):a==="rect"?s=zh(o):a==="threshold"?s=Vh(o):a==="badge"&&(s=Xh(o,this.annotation));var c=s,u=c.components,f=u===void 0?[]:u,l=c.handles,h=l===void 0?[]:l;return f.forEach(function(d){d&&d.attrs&&!d.attrs.stroke&&(d.attrs.stroke=n.annotation.color)}),this.editMode&&(h=h.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),f.push({type:"handle",handles:h})),f}},{key:"drawConnector",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.connector,a=i.type||r.type,o={type:this,connectorData:i};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var s={};a==="curve"?s=qh(o):a==="elbow"?s=Lh(o):s=Ih(o);var c=s,u=c.components,f=u===void 0?[]:u,l=c.handles,h=l===void 0?[]:l,d=f[0];d&&(d.attrs.stroke=this.annotation.color,d.attrs.fill="none");var p=i.end||r.end,g={};if(p==="arrow"){var _=d.data[1],M=d.data[0],w=Math.sqrt(Math.pow(_[0]-M[0],2)+Math.pow(_[1]-M[1],2));w<5&&d.data[2]&&(_=d.data[2]),g=Hh({annotation:this.annotation,start:_,end:M,scale:i.endScale})}else p==="dot"?g=Fh({line:d,scale:i.endScale}):(!p||p==="none")&&this.connector&&this.connector.select(".connector-end").remove();return g.components&&(g.components.forEach(function($){$.attrs.fill=n.annotation.color,$.attrs.stroke=n.annotation.color}),f=f.concat(g.components)),this.editMode&&h.length!==0&&f.push({type:"handle",handles:h}),f}},{key:"drawNote",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.note,a=i.align||r.align||"dynamic",o={bbox:r.bbox,align:a,offset:this.annotation.offset},s=i.lineType||r.lineType,c={};s==="vertical"?c=Rh(o):s==="horizontal"&&(c=Dh(o));var u=c,f=u.components,l=f===void 0?[]:f,h=u.handles,d=h===void 0?[]:h;if(l.forEach(function(M){M.attrs.stroke=n.annotation.color}),this.editMode){d=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),l.push({type:"handle",handles:d});var p=this.dragNote.bind(this),g=this.dragstarted.bind(this),_=this.dragended.bind(this);this.note.call(ga().container(ht("g.annotations").node()).on("start",function(M){return g(M)}).on("drag",function(M){return p(M)}).on("end",function(M){return _(M)}))}else this.note.on("mousedown.drag",null);return l}},{key:"drawNoteContent",value:function(n){var r=this.annotation.note,i=r.padding!==void 0?r.padding:this.notePadding,a=r.orientation||n.orientation||"topBottom",o=r.lineType||n.lineType,s=r.align||n.align||"dynamic";o==="vertical"?a="leftRight":o==="horizontal"&&(a="topBottom");var c={padding:i,bbox:n.bbox,offset:this.annotation.offset,orientation:a,align:s},u=Ph(c),f=u.x,l=u.y;return this.offsetCornerX=f+this.annotation.dx,this.offsetCornerY=l+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+f+", "+l+")"),[]}},{key:"drawOnScreen",value:function(n,r){return this.drawOnSVG(n,r)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function(n){n&&this.annotation.data&&(this.mapX(n),this.mapY(n)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){E.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var n=this.annotation.position;n.x+=E.dx,n.y+=E.dy,this.annotation.position=n}},{key:"dragNote",value:function(){var n=this.annotation.offset;n.x+=E.dx,n.y+=E.dy,this.annotation.offset=n}},{key:"mapHandles",value:function(n){var r=this;return n.map(function(i){return j({},i,{start:r.dragstarted.bind(r),end:r.dragended.bind(r)})})}}]),t}(),dt=function(e,n,r){return function(i){Kn(a,i);function a(o){Rt(this,a);var s=Zn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return s.typeSettings=n,n.disable&&n.disable.forEach(function(c){s[c]&&s[c].remove(),s[c]=void 0,c==="note"&&(s.noteContent=void 0)}),s}return Dt(a,[{key:"className",value:function(){return""+(n.className||ft(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this)&&ft(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(s){return this.typeSettings.subject=j({},n.subject,this.typeSettings.subject),ft(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawSubject",this).call(this,j({},s,this.typeSettings.subject))}},{key:"drawConnector",value:function(s){return this.typeSettings.connector=j({},n.connector,this.typeSettings.connector),ft(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawConnector",this).call(this,j({},s,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(s){return this.typeSettings.note=j({},n.note,this.typeSettings.note),ft(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNote",this).call(this,j({},s,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(s){return ft(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNoteContent",this).call(this,j({},s,n.note,this.typeSettings.note))}}],[{key:"init",value:function(s,c){return ft(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,s,c),r&&(s=r(s,c)),s}}]),a}(e)},qe=function(t){Kn(e,t);function e(n){Rt(this,e);var r=Zn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.textWrap=n.textWrap||120,r.drawText(),r}return Dt(e,[{key:"updateTextWrap",value:function(r){this.textWrap=r,this.drawText()}},{key:"drawText",value:function(){if(this.note){nt(this.note,[this.annotation],"g","annotation-note-content");var r=this.note.select("g.annotation-note-content");nt(r,[this.annotation],"rect","annotation-note-bg"),nt(r,[this.annotation],"text","annotation-note-label"),nt(r,[this.annotation],"text","annotation-note-title");var i={height:0},a=this.a.select("text.annotation-note-label"),o=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,s=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,c=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,u={top:0,bottom:0,left:0,right:0};if(typeof c=="number"?u={top:c,bottom:c,left:c,right:c}:c&&(typeof c>"u"?"undefined":Mh(c))==="object"&&(u=j(u,c)),this.annotation.note.title){var f=this.a.select("text.annotation-note-title");f.text(this.annotation.note.title),f.attr("fill",this.annotation.color),f.attr("font-weight","bold"),f.call(Wr,o,s),i=f.node().getBBox()}a.text(this.annotation.note.label).attr("dx","0"),a.call(Wr,o,s),a.attr("y",i.height*1.1||0),a.attr("fill",this.annotation.color);var l=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",l.width+u.left+u.right).attr("height",l.height+u.top+u.bottom).attr("x",l.x-u.left).attr("y",-u.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(ka),an=dt(qe,{className:"label",note:{align:"middle"}}),Be=dt(qe,{className:"callout",note:{lineType:"horizontal"}});dt(Be,{className:"callout elbow",connector:{type:"elbow"}});dt(Be,{className:"callout curve",connector:{type:"curve"}});dt(ka,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});dt(qe,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});dt(qe,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var Wh=function(t){Kn(e,t);function e(){return Rt(this,e),Zn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Dt(e,[{key:"mapY",value:function(r){ft(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,r);var i=this.annotation;(i.subject.x1||i.subject.x2)&&i.data&&r.y&&(i.y=r.y(i.data)),(i.subject.x1||i.subject.x2)&&!i.x&&(i.x=i.subject.x1||i.subject.x2)}},{key:"mapX",value:function(r){ft(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,r);var i=this.annotation;(i.subject.y1||i.subject.y2)&&i.data&&r.x&&(i.x=r.x(i.data)),(i.subject.y1||i.subject.y2)&&!i.y&&(i.y=i.subject.y1||i.subject.y2)}}]),e}(Be);dt(Wh,{className:"callout xythreshold",subject:{type:"threshold"}});var nt=function(e,n,r,i,a){var o=e.selectAll(r+"."+(a||i)).data(n);return o.enter().append(r).merge(o).attr("class",i),o.exit().remove(),e},Yh=function(e,n,r){var i=r.component,a=r.name;i&&i.on("mouseover.annotations",function(){e.call(a+"over",i,n)}).on("mouseout.annotations",function(){return e.call(a+"out",i,n)}).on("click.annotations",function(){return e.call(a+"click",i,n)})},Wr=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;e.each(function(){for(var a=ht(this),o=a.text().split(r||/[ \t\r\n]+/).reverse().filter(function(f){return f!==""}),s=void 0,c=[],u=a.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");s=o.pop();)c.push(s),u.text(c.join(" ")),u.node().getComputedTextLength()>n&&c.length>1&&(c.pop(),u.text(c.join(" ")),c=[s],u=a.append("tspan").attr("x",0).attr("dy",i+"em").text(s))})},Yr=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return e?e.selectAll(n).nodes().reduce(function(r,i){var a=i.getBBox();r.x=Math.min(r.x,a.x),r.y=Math.min(r.y,a.y),r.width=Math.max(r.width,a.width);var o=i&&i.attributes&&i.attributes.y;return r.height=Math.max(r.height,(o&&parseFloat(o.value)||0)+a.height),r},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function on(){var t=[],e=void 0,n=void 0,r=[],i={},a={},o=!1,s=void 0,c=Be,u=void 0,f=void 0,l=zn("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),h=void 0,d=function(g){h=g,o||g.selectAll("circle.handle").remove();var _=t.map(function(y){return y.type||(y.type=c),y.disable||(y.disable=r),new Nh(y)});e=e||new Ah({annotations:_,accessors:i,accessorsInverse:a,ids:s});var M=g.selectAll("g").data([e]);M.enter().append("g").attr("class","annotations");var w=g.select("g.annotations");nt(w,e.annotations,"g","annotation");var $=w.selectAll("g.annotation");$.each(function(y){var x=ht(this);x.attr("class","annotation"),nt(x,[y],"g","annotation-connector"),nt(x,[y],"g","annotation-subject"),nt(x,[y],"g","annotation-note"),nt(x.select("g.annotation-note"),[y],"g","annotation-note-content"),y.type=y.type.toString()==="[object Object]"?y.type:new y.type({a:x,annotation:y,textWrap:u,notePadding:f,editMode:o,dispatcher:l,accessors:i}),y.type.draw(),y.type.drawText&&y.type.drawText()})};return d.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",e.json),window.copy(JSON.stringify(e.json.map(function(p){return delete p.type,p}))),d},d.update=function(){return t&&e&&(t=e.annotations.map(function(p){return p.type.draw(),p})),d},d.updateText=function(){return e&&(e.updateText(u),t=e.annotations),d},d.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,d},d.disable=function(p){return arguments.length?(r=p,e&&(e.updateDisable(r),t=e.annotations),d):r},d.textWrap=function(p){return arguments.length?(u=p,e&&(e.updateTextWrap(u),t=e.annotations),d):u},d.notePadding=function(p){return arguments.length?(f=p,e&&(e.updateNotePadding(f),t=e.annotations),d):f},d.type=function(p,g){return arguments.length?(c=p,e&&(e.annotations.map(function(_){_.type.note&&_.type.note.selectAll("*:not(.annotation-note-content)").remove(),_.type.noteContent&&_.type.noteContent.selectAll("*").remove(),_.type.subject&&_.type.subject.selectAll("*").remove(),_.type.connector&&_.type.connector.selectAll("*").remove(),_.type.typeSettings={},_.type=c,_.subject=g&&g.subject||_.subject,_.connector=g&&g.connector||_.connector,_.note=g&&g.note||_.note}),t=e.annotations),d):c},d.annotations=function(p){if(!arguments.length)return e&&e.annotations||t;if(t=p,e&&e.annotations){var g=t.some(function(_){return!_.type||_.type.toString()!=="[object Object]"});g?(e=null,d(h)):e.annotations=t}return d},d.context=function(p){return arguments.length?(n=p,d):n},d.accessors=function(p){return arguments.length?(i=p,d):i},d.accessorsInverse=function(p){return arguments.length?(a=p,d):a},d.ids=function(p){return arguments.length?(s=p,d):s},d.editMode=function(p){return arguments.length?(o=p,h&&h.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),d):o},d.collection=function(p){return arguments.length?(e=p,d):e},d.on=function(){var p=l.on.apply(l,arguments);return p===l?d:p},d}var Sn="http://www.w3.org/1999/xhtml";const Ur={svg:"http://www.w3.org/2000/svg",xhtml:Sn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Na(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ur.hasOwnProperty(e)?{space:Ur[e],local:t}:t}function Uh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Sn&&e.documentElement.namespaceURI===Sn?e.createElement(t):e.createElementNS(n,t)}}function Gh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Aa(t){var e=Na(t);return(e.local?Gh:Uh)(e)}var Kh=0;function Gr(){this._="@"+(++Kh).toString(36)}Gr.prototype={constructor:Gr,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Sa=function(t){return function(){return this.matches(t)}};if(typeof document<"u"){var Bt=document.documentElement;if(!Bt.matches){var Zh=Bt.webkitMatchesSelector||Bt.msMatchesSelector||Bt.mozMatchesSelector||Bt.oMatchesSelector;Sa=function(t){return function(){return Zh.call(this,t)}}}}const Jh=Sa;var Ta={};if(typeof document<"u"){var Qh=document.documentElement;"onmouseenter"in Qh||(Ta={mouseenter:"mouseover",mouseleave:"mouseout"})}function td(t,e,n){return t=Ca(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Ca(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function ed(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function nd(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function rd(t,e,n){var r=Ta.hasOwnProperty(t.type)?td:Ca;return function(i,a,o){var s=this.__on,c,u=r(e,a,o);if(s){for(var f=0,l=s.length;f<l;++f)if((c=s[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=n),c.value=e;return}}this.addEventListener(t.type,u,n),c={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(c):this.__on=[c]}}function id(t,e,n){var r=ed(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(i=0,f=s[c];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?rd:nd,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function ad(){}function Ea(t){return t==null?ad:function(){return this.querySelector(t)}}function od(t){typeof t!="function"&&(t=Ea(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new U(r,this._parents)}function sd(){return[]}function cd(t){return t==null?sd:function(){return this.querySelectorAll(t)}}function ud(t){typeof t!="function"&&(t=cd(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(r.push(t.call(c,c.__data__,u,o)),i.push(c));return new U(r,i)}function fd(t){typeof t!="function"&&(t=Jh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new U(r,this._parents)}function Oa(t){return new Array(t.length)}function ld(){return new U(this._enter||this._groups.map(Oa),this._parents)}function Te(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Te.prototype={constructor:Te,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function hd(t){return function(){return t}}var Kr="$";function dd(t,e,n,r,i,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Te(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function pd(t,e,n,r,i,a,o){var s,c,u={},f=e.length,l=a.length,h=new Array(f),d;for(s=0;s<f;++s)(c=e[s])&&(h[s]=d=Kr+o.call(c,c.__data__,s,e),d in u?i[s]=c:u[d]=c);for(s=0;s<l;++s)d=Kr+o.call(t,a[s],s,a),(c=u[d])?(r[s]=c,c.__data__=a[s],u[d]=null):n[s]=new Te(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u[h[s]]===c&&(i[s]=c)}function gd(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each(function(S){d[++u]=S}),d;var n=e?pd:dd,r=this._parents,i=this._groups;typeof t!="function"&&(t=hd(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=r[u],l=i[u],h=l.length,d=t.call(f,f&&f.__data__,u,r),p=d.length,g=s[u]=new Array(p),_=o[u]=new Array(p),M=c[u]=new Array(h);n(f,l,g,_,M,d,e);for(var w=0,$=0,y,x;w<p;++w)if(y=g[w]){for(w>=$&&($=w+1);!(x=_[$])&&++$<p;);y._next=x||null}}return o=new U(o,r),o._enter=s,o._exit=c,o}function yd(){return new U(this._exit||this._groups.map(Oa),this._parents)}function _d(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,l=o[s]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;s<r;++s)o[s]=e[s];return new U(o,this._parents)}function md(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&a!==o.nextSibling&&a.parentNode.insertBefore(o,a),a=o);return this}function vd(t){t||(t=xd);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new U(i,this._parents).order()}function xd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bd(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function wd(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function $d(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Md(){var t=0;return this.each(function(){++t}),t}function kd(){return!this.node()}function Nd(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Ad(t){return function(){this.removeAttribute(t)}}function Sd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Td(t,e){return function(){this.setAttribute(t,e)}}function Cd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ed(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Od(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pd(t,e){var n=Na(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Sd:Ad:typeof e=="function"?n.local?Od:Ed:n.local?Cd:Td)(n,e))}function Pa(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rd(t){return function(){this.style.removeProperty(t)}}function Dd(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Id(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ld(t,e,n){var r;return arguments.length>1?this.each((e==null?Rd:typeof e=="function"?Id:Dd)(t,e,n??"")):Pa(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function qd(t){return function(){delete this[t]}}function Bd(t,e){return function(){this[t]=e}}function Hd(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Fd(t,e){return arguments.length>1?this.each((e==null?qd:typeof e=="function"?Hd:Bd)(t,e)):this.node()[t]}function Ra(t){return t.trim().split(/^|\s+/)}function Jn(t){return t.classList||new Da(t)}function Da(t){this._node=t,this._names=Ra(t.getAttribute("class")||"")}Da.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ia(t,e){for(var n=Jn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function La(t,e){for(var n=Jn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function jd(t){return function(){Ia(this,t)}}function zd(t){return function(){La(this,t)}}function Vd(t,e){return function(){(e.apply(this,arguments)?Ia:La)(this,t)}}function Xd(t,e){var n=Ra(t+"");if(arguments.length<2){for(var r=Jn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Vd:e?jd:zd)(n,e))}function Wd(){this.textContent=""}function Yd(t){return function(){this.textContent=t}}function Ud(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Gd(t){return arguments.length?this.each(t==null?Wd:(typeof t=="function"?Ud:Yd)(t)):this.node().textContent}function Kd(){this.innerHTML=""}function Zd(t){return function(){this.innerHTML=t}}function Jd(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qd(t){return arguments.length?this.each(t==null?Kd:(typeof t=="function"?Jd:Zd)(t)):this.node().innerHTML}function t0(){this.nextSibling&&this.parentNode.appendChild(this)}function e0(){return this.each(t0)}function n0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function r0(){return this.each(n0)}function i0(t){var e=typeof t=="function"?t:Aa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function a0(){return null}function o0(t,e){var n=typeof t=="function"?t:Aa(t),r=e==null?a0:typeof e=="function"?e:Ea(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function s0(){var t=this.parentNode;t&&t.removeChild(this)}function c0(){return this.each(s0)}function u0(t){return arguments.length?this.property("__data__",t):this.node().__data__}function qa(t,e,n){var r=Pa(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function f0(t,e){return function(){return qa(this,t,e)}}function l0(t,e){return function(){return qa(this,t,e.apply(this,arguments))}}function h0(t,e){return this.each((typeof e=="function"?l0:f0)(t,e))}var d0=[null];function U(t,e){this._groups=t,this._parents=e}U.prototype={constructor:U,select:od,selectAll:ud,filter:fd,data:gd,enter:ld,exit:yd,merge:_d,order:md,sort:vd,call:bd,nodes:wd,node:$d,size:Md,empty:kd,each:Nd,attr:Pd,style:Ld,property:Fd,classed:Xd,text:Gd,html:Qd,raise:e0,lower:r0,append:i0,insert:o0,remove:c0,datum:u0,on:id,dispatch:h0};function p0(t){return typeof t=="string"?new U([[document.querySelector(t)]],[document.documentElement]):new U([[t]],d0)}function Ce(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ot(t){return t=Ce(Math.abs(t)),t?t[1]:NaN}function g0(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function y0(t,e){t=t.toPrecision(e);t:for(var n=t.length,r=1,i=-1,a;r<n;++r)switch(t[r]){case".":i=a=r;break;case"0":i===0&&(i=r),a=r;break;case"e":break t;default:i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var Ba;function _0(t,e){var n=Ce(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ba=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ce(t,Math.max(0,e+a-1))[0]}function Zr(t,e){var n=Ce(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ha={"":y0,"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Zr(t*100,e)},r:Zr,s:_0,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var m0=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Ee(t){return new Fa(t)}function Fa(t){if(!(e=m0.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],c=!!e[7],u=e[8]&&+e[8].slice(1),f=e[9]||"";f==="n"?(c=!0,f="g"):Ha[f]||(f=""),(o||n==="0"&&r==="=")&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=c,this.precision=u,this.type=f}Fa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var Jr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function v0(t){return t}function ja(t){var e=t.grouping&&t.thousands?g0(t.grouping,t.thousands):v0,n=t.currency,r=t.decimal;function i(o){o=Ee(o);var s=o.fill,c=o.align,u=o.sign,f=o.symbol,l=o.zero,h=o.width,d=o.comma,p=o.precision,g=o.type,_=f==="$"?n[0]:f==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",M=f==="$"?n[1]:/[%p]/.test(g)?"%":"",w=Ha[g],$=!g||/[defgprs%]/.test(g);p=p==null?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function y(x){var S=_,b=M,v,T,C;if(g==="c")b=w(x)+b,x="";else{x=+x;var A=(x<0||1/x<0)&&(x*=-1,!0);if(x=w(x,p),A){for(v=-1,T=x.length,A=!1;++v<T;)if(C=x.charCodeAt(v),48<C&&C<58||g==="x"&&96<C&&C<103||g==="X"&&64<C&&C<71){A=!0;break}}if(S=(A?u==="("?u:"-":u==="-"||u==="("?"":u)+S,b=b+(g==="s"?Jr[8+Ba/3]:"")+(A&&u==="("?")":""),$){for(v=-1,T=x.length;++v<T;)if(C=x.charCodeAt(v),48>C||C>57){b=(C===46?r+x.slice(v+1):x.slice(v))+b,x=x.slice(0,v);break}}}d&&!l&&(x=e(x,1/0));var N=S.length+x.length+b.length,k=N<h?new Array(h-N+1).join(s):"";switch(d&&l&&(x=e(k+x,k.length?h-b.length:1/0),k=""),c){case"<":return S+x+b+k;case"=":return S+k+x+b;case"^":return k.slice(0,N=k.length>>1)+S+x+b+k.slice(N)}return k+S+x+b}return y.toString=function(){return o+""},y}function a(o,s){var c=i((o=Ee(o),o.type="f",o)),u=Math.max(-8,Math.min(8,Math.floor(Ot(s)/3)))*3,f=Math.pow(10,-u),l=Jr[8+u/3];return function(h){return c(f*h)+l}}return{format:i,formatPrefix:a}}var ae,Qn,tr;x0({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function x0(t){return ae=ja(t),Qn=ae.format,tr=ae.formatPrefix,ae}function b0(t){return Math.max(0,-Ot(Math.abs(t)))}function w0(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ot(e)/3)))*3-Ot(Math.abs(t)))}function $0(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ot(e)-Ot(t))+1}var M0={value:function(){}};function za(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new he(n)}function he(t){this._=t}function k0(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}he.prototype=za.prototype={constructor:he,on:function(t,e){var n=this._,r=k0(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=N0(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Qr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Qr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new he(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function N0(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Qr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=M0,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}function Va(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function A0(t){return t.length===1&&(t=S0(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function S0(t){return function(e,n){return Va(t(e),n)}}var T0=A0(Va),C0=T0.right;function E0(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}var O0=Math.sqrt(50),P0=Math.sqrt(10),R0=Math.sqrt(2);function D0(t,e,n){var r=Oe(t,e,n);return E0(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function Oe(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=O0?i*=10:a>=P0?i*=5:a>=R0&&(i*=2),e<t?-i:i}function I0(t,e){for(var n=0,r=t.length,i,a=-1;++a<r;)(i=+t[a])&&(n+=i);return n}var X="$";function Pe(){}Pe.prototype=Xa.prototype={constructor:Pe,has:function(t){return X+t in this},get:function(t){return this[X+t]},set:function(t,e){return this[X+t]=e,this},remove:function(t){var e=X+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===X&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===X&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===X&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===X&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===X&&++t;return t},empty:function(){for(var t in this)if(t[0]===X)return!1;return!0},each:function(t){for(var e in this)e[0]===X&&t(this[e],e.slice(1),this)}};function Xa(t,e){var n=new Pe;if(t instanceof Pe)t.each(function(s,c){n.set(c,s)});else if(Array.isArray(t)){var r=-1,i=t.length,a;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(a=t[r],r,t),a)}else if(t)for(var o in t)n.set(o,t[o]);return n}function ti(){}var gt=Xa.prototype;ti.prototype={constructor:ti,has:gt.has,add:function(t){return t+="",this[X+t]=t,this},remove:gt.remove,clear:gt.clear,values:gt.keys,size:gt.size,empty:gt.empty,each:gt.each};var Wa=Array.prototype,L0=Wa.map,ei=Wa.slice;function He(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function er(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function It(){}var $t=.7,Pt=1/$t,At="\\s*([+-]?\\d+)\\s*",Yt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",q0=/^#([0-9a-f]{3,8})$/,B0=new RegExp("^rgb\\("+[At,At,At]+"\\)$"),H0=new RegExp("^rgb\\("+[at,at,at]+"\\)$"),F0=new RegExp("^rgba\\("+[At,At,At,Yt]+"\\)$"),j0=new RegExp("^rgba\\("+[at,at,at,Yt]+"\\)$"),z0=new RegExp("^hsl\\("+[Yt,at,at]+"\\)$"),V0=new RegExp("^hsla\\("+[Yt,at,at,Yt]+"\\)$"),ni={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};He(It,Ut,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ri,formatHex:ri,formatHsl:X0,formatRgb:ii,toString:ii});function ri(){return this.rgb().formatHex()}function X0(){return Ua(this).formatHsl()}function ii(){return this.rgb().formatRgb()}function Ut(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=q0.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ai(e):n===3?new q(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?oe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?oe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=B0.exec(t))?new q(e[1],e[2],e[3],1):(e=H0.exec(t))?new q(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=F0.exec(t))?oe(e[1],e[2],e[3],e[4]):(e=j0.exec(t))?oe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=z0.exec(t))?ci(e[1],e[2]/100,e[3]/100,1):(e=V0.exec(t))?ci(e[1],e[2]/100,e[3]/100,e[4]):ni.hasOwnProperty(t)?ai(ni[t]):t==="transparent"?new q(NaN,NaN,NaN,0):null}function ai(t){return new q(t>>16&255,t>>8&255,t&255,1)}function oe(t,e,n,r){return r<=0&&(t=e=n=NaN),new q(t,e,n,r)}function Ya(t){return t instanceof It||(t=Ut(t)),t?(t=t.rgb(),new q(t.r,t.g,t.b,t.opacity)):new q}function Tn(t,e,n,r){return arguments.length===1?Ya(t):new q(t,e,n,r??1)}function q(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}He(q,Tn,er(It,{brighter:function(t){return t=t==null?Pt:Math.pow(Pt,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?$t:Math.pow($t,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oi,formatHex:oi,formatRgb:si,toString:si}));function oi(){return"#"+sn(this.r)+sn(this.g)+sn(this.b)}function si(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function sn(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function ci(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rt(t,e,n,r)}function Ua(t){if(t instanceof rt)return new rt(t.h,t.s,t.l,t.opacity);if(t instanceof It||(t=Ut(t)),!t)return new rt;if(t instanceof rt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new rt(o,s,c,t.opacity)}function W0(t,e,n,r){return arguments.length===1?Ua(t):new rt(t,e,n,r??1)}function rt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}He(rt,W0,er(It,{brighter:function(t){return t=t==null?Pt:Math.pow(Pt,t),new rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?$t:Math.pow($t,t),new rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new q(cn(t>=240?t-240:t+120,i,r),cn(t,i,r),cn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function cn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Y0=Math.PI/180,U0=180/Math.PI,Ga=-.14861,nr=1.78277,rr=-.29227,Fe=-.90649,Gt=1.97294,ui=Gt*Fe,fi=Gt*nr,li=nr*rr-Fe*Ga;function G0(t){if(t instanceof xt)return new xt(t.h,t.s,t.l,t.opacity);t instanceof q||(t=Ya(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(li*r+ui*e-fi*n)/(li+ui-fi),a=r-i,o=(Gt*(n-i)-rr*a)/Fe,s=Math.sqrt(o*o+a*a)/(Gt*i*(1-i)),c=s?Math.atan2(o,a)*U0-120:NaN;return new xt(c<0?c+360:c,s,i,t.opacity)}function st(t,e,n,r){return arguments.length===1?G0(t):new xt(t,e,n,r??1)}function xt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}He(xt,st,er(It,{brighter:function(t){return t=t==null?Pt:Math.pow(Pt,t),new xt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?$t:Math.pow($t,t),new xt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Y0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new q(255*(e+n*(Ga*r+nr*i)),255*(e+n*(rr*r+Fe*i)),255*(e+n*(Gt*r)),this.opacity)}}));function je(t){return function(){return t}}function Ka(t,e){return function(n){return t+n*e}}function K0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Z0(t,e){var n=e-t;return n?Ka(t,n>180||n<-180?n-360*Math.round(n/360):n):je(isNaN(t)?e:t)}function J0(t){return(t=+t)==1?St:function(e,n){return n-e?K0(e,n,t):je(isNaN(e)?n:e)}}function St(t,e){var n=e-t;return n?Ka(t,n):je(isNaN(t)?e:t)}const hi=function t(e){var n=J0(e);function r(i,a){var o=n((i=Tn(i)).r,(a=Tn(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),u=St(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function Q0(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function tp(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ep(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=ir(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function np(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Re(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function rp(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ir(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,un=new RegExp(Cn.source,"g");function ip(t){return function(){return t}}function ap(t){return function(e){return t(e)+""}}function op(t,e){var n=Cn.lastIndex=un.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Cn.exec(t))&&(i=un.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Re(r,i)})),n=un.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?ap(c[0].x):ip(e):(e=c.length,function(u){for(var f=0,l;f<e;++f)s[(l=c[f]).i]=l.x(u);return s.join("")})}function ir(t,e){var n=typeof e,r;return e==null||n==="boolean"?je(e):(n==="number"?Re:n==="string"?(r=Ut(e))?(e=r,hi):op:e instanceof Ut?hi:e instanceof Date?np:tp(e)?Q0:Array.isArray(e)?ep:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?rp:Re)(t,e)}function sp(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Za(t){return function e(n){n=+n;function r(i,a){var o=t((i=st(i)).h,(a=st(a)).h),s=St(i.s,a.s),c=St(i.l,a.l),u=St(i.opacity,a.opacity);return function(f){return i.h=o(f),i.s=s(f),i.l=c(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=e,r}(1)}Za(Z0);var ar=Za(St);function cp(t){return function(){return t}}function up(t){return+t}var di=[0,1];function Ja(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:cp(e)}function fp(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=e?0:i>=n?1:r(i)}}}function lp(t){return function(e,n){var r=t(e=+e,n=+n);return function(i){return i<=0?e:i>=1?n:r(i)}}}function hp(t,e,n,r){var i=t[0],a=t[1],o=e[0],s=e[1];return a<i?(i=n(a,i),o=r(s,o)):(i=n(i,a),o=r(o,s)),function(c){return o(i(c))}}function dp(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=n(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(c){var u=C0(t,c,1,i)-1;return o[u](a[u](c))}}function pp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function gp(t,e){var n=di,r=di,i=ir,a=!1,o,s,c;function u(){return o=Math.min(n.length,r.length)>2?dp:hp,s=c=null,f}function f(l){return(s||(s=o(n,r,a?fp(t):t,i)))(+l)}return f.invert=function(l){return(c||(c=o(r,n,Ja,a?lp(e):e)))(+l)},f.domain=function(l){return arguments.length?(n=L0.call(l,up),u()):n.slice()},f.range=function(l){return arguments.length?(r=ei.call(l),u()):r.slice()},f.rangeRound=function(l){return r=ei.call(l),i=sp,u()},f.clamp=function(l){return arguments.length?(a=!!l,u()):a},f.interpolate=function(l){return arguments.length?(i=l,u()):i},u()}function yp(t,e,n){var r=t[0],i=t[t.length-1],a=Oe(r,i,e??10),o;switch(n=Ee(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(i));return n.precision==null&&!isNaN(o=w0(a,s))&&(n.precision=o),tr(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=$0(a,Math.max(Math.abs(r),Math.abs(i))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=b0(a))&&(n.precision=o-(n.type==="%")*2);break}}return Qn(n)}function _p(t){var e=t.domain;return t.ticks=function(n){var r=e();return D0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){return yp(e(),n,r)},t.nice=function(n){var r=e(),i=r.length-1,a=n??10,o=r[0],s=r[i],c=Oe(o,s,a);return c&&(c=Oe(Math.floor(o/c)*c,Math.ceil(s/c)*c,a),r[0]=Math.floor(o/c)*c,r[i]=Math.ceil(s/c)*c,e(r)),t},t}function Qa(){var t=gp(Ja,Re);return t.copy=function(){return pp(t,Qa())},_p(t)}function pt(t){return t.match(/.{6}/g).map(function(e){return"#"+e})}pt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");pt("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");pt("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");pt("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");ar(st(300,.5,0),st(-240,.5,1));ar(st(-100,.75,.35),st(80,1.5,.8));ar(st(260,.75,.35),st(80,1.5,.8));st();function ze(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}ze(pt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));ze(pt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));ze(pt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));ze(pt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to=function(e){return e},pi=function(e){for(var n=[],r=0,i=e.length;r<i;r++)n[r]=e[i-r-1];return n},gi=function(e,n){e.each(function(){var r=p0(this),i=r.text().split(/\s+/).reverse(),a,o=[],s=1.2;r.attr("y");for(var c=parseFloat(r.attr("dy"))||0,u=r.text(null).append("tspan").attr("x",0).attr("dy",c+"em");a=i.pop();)o.push(a),u.text(o.join(" ")),u.node().getComputedTextLength()>n&&o.length>1&&(o.pop(),u.text(o.join(" ")),o=[a],u=r.append("tspan").attr("x",0).attr("dy",s+c+"em").text(a))})},vp=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments[1],r=arguments[2],i=arguments[3],a=arguments[4];if((typeof n>"u"?"undefined":mp(n))==="object"){if(n.length===0)return e;for(var o=n.length;o<e.length;o++)n.push(e[o]);return n}else if(typeof n=="function"){for(var s=[],c=e.length,u=0;u<c;u++)s.push(n({i:u,genLength:c,generatedLabels:e,domain:r,range:i,labelDelimiter:a}));return s}return e},xp=function(e,n,r){var i=[];if(n.length>1)i=n;else for(var a=e.domain(),o=(a[a.length-1]-a[0])/(n-1),s=0;s<n;s++)i.push(a[0]+s*o);var c=i.map(r);return{data:i,labels:c,feature:function(f){return e(f)}}},bp=function(e,n,r){var i=e.range().map(function(a){var o=e.invertExtent(a);return n(o[0])+" "+r+" "+n(o[1])});return{data:e.range(),labels:i,feature:to}},wp=function(e){return{data:e.domain(),labels:e.domain(),feature:function(r){return e(r)}}},$p=function(e,n,r){e.call("cellover",r,n)},Mp=function(e,n,r){e.call("cellout",r,n)},kp=function(e,n,r){e.call("cellclick",r,n)},et={d3_drawShapes:function(e,n,r,i,a,o){e==="rect"?n.attr("height",r).attr("width",i):e==="circle"?n.attr("r",a):e==="line"?n.attr("x1",0).attr("x2",i).attr("y1",0).attr("y2",0):e==="path"&&n.attr("d",o)},d3_addText:function(e,n,r,i,a){n.append("text").attr("class",i+"label");var o=e.selectAll("g."+i+"cell text."+i+"label").data(r).text(to);return a&&e.selectAll("g."+i+"cell text."+i+"label").call(gi,a),o},d3_calcType:function(e,n,r,i,a,o){var s=e.invertExtent?bp(e,a,o):e.ticks?xp(e,r,a):wp(e),c=e.range&&e.range()||e.domain();return s.labels=vp(s.labels,i,e.domain(),c,o),n&&(s.labels=pi(s.labels),s.data=pi(s.data)),s},d3_filterCells:function(e,n){var r=e.data.map(function(o,s){return{data:o,label:e.labels[s]}}).filter(n),i=r.map(function(o){return o.data}),a=r.map(function(o){return o.label});return e.data=e.data.filter(function(o){return i.indexOf(o)!==-1}),e.labels=e.labels.filter(function(o){return a.indexOf(o)!==-1}),e},d3_placement:function(e,n,r,i,a,o){n.attr("transform",r),i.attr("transform",a),e==="horizontal"&&i.style("text-anchor",o)},d3_addEvents:function(e,n){e.on("mouseover.legend",function(r){$p(n,r,this)}).on("mouseout.legend",function(r){Mp(n,r,this)}).on("click.legend",function(r){kp(n,r,this)})},d3_title:function(e,n,r,i){if(n!==""){var a=e.selectAll("text."+r+"legendTitle");a.data([n]).enter().append("text").attr("class",r+"legendTitle"),e.selectAll("text."+r+"legendTitle").text(n),i&&e.selectAll("text."+r+"legendTitle").call(gi,i);var o=e.select("."+r+"legendCells"),s=e.select("."+r+"legendTitle").nodes().map(function(u){return u.getBBox().height})[0],c=-o.nodes().map(function(u){return u.getBBox().x})[0];o.attr("transform","translate("+c+","+s+")")}},d3_defaultLocale:{format:Qn,formatPrefix:tr},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};function Np(){var t=Qa(),e="rect",n=15,r=15,i=10,a=2,o=[5],s=void 0,c=[],u="",f=!1,l="",h=et.d3_defaultLocale,d=et.d3_defaultFormatSpecifier,p=10,g="middle",_=et.d3_defaultDelimiter,M=void 0,w="vertical",$=!1,y=void 0,x=void 0,S=za("cellover","cellout","cellclick");function b(v){var T=et.d3_calcType(t,$,o,c,h.format(d),_),C=v.selectAll("g").data([t]);C.enter().append("g").attr("class",u+"legendCells"),s&&et.d3_filterCells(T,s);var A=v.select("."+u+"legendCells").selectAll("."+u+"cell").data(T.data),N=A.enter().append("g").attr("class",u+"cell");N.append(e).attr("class",u+"swatch");var k=v.selectAll("g."+u+"cell "+e+"."+u+"swatch").data(T.data);et.d3_addEvents(N,S),A.exit().transition().style("opacity",0).remove(),k.exit().transition().style("opacity",0).remove(),k=k.merge(k),et.d3_drawShapes(e,k,r,n,i,y);var m=et.d3_addText(v,N,T.labels,u,M);A=N.merge(A);var P=m.nodes().map(function(H){return H.getBBox()}),O=k.nodes().map(function(H){return H.getBBox()});f?k.attr("class",function(H){return u+"swatch "+T.feature(H)}):e=="line"?k.style("stroke",T.feature):k.style("fill",T.feature);var R=void 0,B=void 0,D=g=="start"?0:g=="middle"?.5:1;w==="vertical"?function(){var H=P.map(function(Q,L){return Math.max(Q.height,O[L].height)});R=function(L,G){var tt=I0(H.slice(0,G));return"translate(0, "+(tt+G*a)+")"},B=function(L,G){return"translate( "+(O[G].width+O[G].x+p)+", "+(O[G].y+O[G].height/2+5)+")"}}():w==="horizontal"&&(R=function(Q,L){return"translate("+L*(O[L].width+a)+",0)"},B=function(Q,L){return"translate("+(O[L].width*D+O[L].x)+`,
          `+(O[L].height+O[L].y+p+8)+")"}),et.d3_placement(w,A,R,m,B,g),et.d3_title(v,l,u,x),A.transition().style("opacity",1)}return b.scale=function(v){return arguments.length?(t=v,b):t},b.cells=function(v){return arguments.length?((v.length>1||v>=2)&&(o=v),b):o},b.cellFilter=function(v){return arguments.length?(s=v,b):s},b.shape=function(v,T){return arguments.length?((v=="rect"||v=="circle"||v=="line"||v=="path"&&typeof T=="string")&&(e=v,y=T),b):e},b.shapeWidth=function(v){return arguments.length?(n=+v,b):n},b.shapeHeight=function(v){return arguments.length?(r=+v,b):r},b.shapeRadius=function(v){return arguments.length?(i=+v,b):i},b.shapePadding=function(v){return arguments.length?(a=+v,b):a},b.labels=function(v){return arguments.length?(c=v,b):c},b.labelAlign=function(v){return arguments.length?((v=="start"||v=="end"||v=="middle")&&(g=v),b):g},b.locale=function(v){return arguments.length?(h=ja(v),b):h},b.labelFormat=function(v){return arguments.length?(d=Ee(v),b):b.locale().format(d)},b.labelOffset=function(v){return arguments.length?(p=+v,b):p},b.labelDelimiter=function(v){return arguments.length?(_=v,b):_},b.labelWrap=function(v){return arguments.length?(M=v,b):M},b.useClass=function(v){return arguments.length?((v===!0||v===!1)&&(f=v),b):f},b.orient=function(v){return arguments.length?(v=v.toLowerCase(),(v=="horizontal"||v=="vertical")&&(w=v),b):w},b.ascending=function(v){return arguments.length?($=!!v,b):$},b.classPrefix=function(v){return arguments.length?(u=v,b):u},b.title=function(v){return arguments.length?(l=v,b):l},b.titleWidth=function(v){return arguments.length?(x=v,b):x},b.textWrap=function(v){return arguments.length?(textWrap=v,b):textWrap},b.on=function(){var v=S.on.apply(S,arguments);return v===S?b:v},b}async function Ap(t){const e=await Sr("data/superbowl_halftime_1.csv",m=>({away_team:m.away_team_name,home_team:m.home_team_name,away_team_score:Number(m.away_team_score),year:m.year,sb_number:Number(m.sb_number),home_team_score:Number(m.home_team_score),difference:Number(m.difference),halftime_win:m.halftime_win==="yes"?!0:m.halftime_win==="no"?!1:null})),n=yi(e),r=e.filter(m=>m.halftime_win===!1),i=yi(r),a=await Sr("data/nfl.csv");console.log("ths is the data",a),console.log(e);const o=new Map;a.forEach(m=>{o.set(m.Name,m.Abbreviation)});const c=e.sort((m,P)=>m.sb_number-P.sb_number).sort((m,P)=>m.difference-P.difference),u={t:20,r:20,b:20,l:110},f=800-(u.r+u.l),l=875-(u.t+u.b),d=Ke(t).append("svg").attr("height",f+(u.r+u.l)).attr("width",l+(u.l+u.r)).append("g").attr("transform",`translate(${u.l},${u.t})`),p=Ji().domain([0,go(e,m=>m.difference)]).range([0,l]),g=gf([0,...c.map(m=>m.sb_number)],[f,0]);d.append("g").attr("class","y-axis").call(Mo(g)),d.append("g").attr("class","x-axis").attr("transform",`translate(0, ${f})`).call($o(p).tickValues([3,7,10,13,17,21,24])).call(m=>m.selectAll(".tick line").clone().attr("y1",-670).attr("stroke-opacity",.1)),d.append("g").selectAll(".line-avg-main").data([i]).join("line").attr("class",".line-avg-main").attr("x1",m=>p(m)).attr("x2",m=>p(m)).attr("y1",m=>g(0)).attr("y2",-5).attr("stroke","grey").attr("stroke-dasharray","5 3"),d.append("g").selectAll(".dif-lines").data(e).join("line").attr("x1",p(0)).attr("x2",m=>p(m.difference)).attr("y1",m=>g(m.sb_number)).attr("y2",m=>g(m.sb_number)).attr("stroke","grey"),d.append("g").selectAll(".home-circles").data(e).join("circle").attr("cx",m=>p(m.difference)).attr("cy",m=>g(m.sb_number)).attr("r",3).attr("fill",m=>m.halftime_win?"red":m.halftime_win===null?"grey":"green"),d.append("g").selectAll(".score-text").data(e).join("text").attr("x",m=>p(0)).attr("y",m=>g(m.sb_number)).attr("transform","translate(-110,3)").style("font-size","10px").style("fill","black").text(m=>`${o.get(m.away_team)} ${m.away_team_score} - ${m.home_team_score} ${o.get(m.home_team)}`),console.log(n),d.append("g").selectAll(".line-avg-main").data([n]).join("line").attr("class",".line-avg-main").attr("x1",m=>p(m)).attr("x2",m=>p(m)).attr("y1",m=>g(0)).attr("y2",-5).attr("stroke","grey").attr("stroke-dasharray","5 3");const _=e.filter(m=>m.sb_number===59),M=an,w=[{note:{label:"This deficit was historic, second all time, 13 more than average, and the largest deficit while also being shut out.",title:"KC's 24 point Deficit",wrap:200},data:_[0],connector:{end:"arrow",type:"line",lineType:"vertical"},color:["grey"],dy:70,dx:-70}],$=on().notePadding(0).type(M).accessors({x:m=>p(m.difference)-3,y:m=>g(m.sb_number)+3}).annotations(w);d.append("g").attr("class","kc-annotation").call($);const y=e.filter(m=>m.sb_number===51),x=an,S=[{note:{label:"This deficit was twice as much as the average overall halftime deficit, and 3x larger than the average half time comeback. No team before than had overcame a 7 point halftime deficit.",title:"New Englands 18 point Halftime Comeback Win",wrap:200},data:y[0],connector:{end:"arrow",type:"line",lineType:"vertical"},color:["grey"],dy:150,dx:-50}],b=on().notePadding(0).type(x).accessors({x:m=>p(m.difference)-4,y:m=>g(m.sb_number)+4}).annotations(S);d.append("g").attr("class","NE-annotation").call(b);const v=e.filter(m=>m.sb_number===13),T=an,C=[{note:{label:"",title:"The Most common half time deficit comeback is 7 points.",wrap:200},data:v[0],connector:{end:"arrow",type:"line",lineType:"vertical"},color:["grey"],dy:80,dx:75}],A=on().notePadding(0).type(T).accessors({x:m=>p(m.difference)+8,y:m=>g(m.sb_number)+4}).annotations(C);d.append("g").attr("class","AVG-annotation").call(A),d.append("g").selectAll(".avg-diff-class").data([n]).join("text").attr("x",m=>p(m)+5).attr("y",g(0)-2).text("<- Avg Halftime Deficit").attr("fill","grey").style("font-size","10px"),d.append("g").selectAll(".avg-comeback-class").data([i]).join("text").attr("x",m=>p(m)-182.17).attr("y",g(0)-2).text("Avg Comback Win Halftime Deficit ->").attr("fill","grey").style("font-size","10px"),d.append("g").selectAll(".avg-diff-class").data([n]).join("text").attr("x",m=>p(m)+2).attr("y",-1).text(m=>"<-"+m.toFixed(1)).attr("fill","grey").style("font-size","10px"),d.append("g").selectAll(".avg-comeback-class").data([i]).join("text").attr("x",m=>p(m)-28).attr("y",-1).text(m=>m.toFixed(1)+"->").attr("fill","grey").style("font-size","10px"),d.append("g").selectAll(".label-score").data(["Halftime Score"]).join("text").attr("x",-110).attr("y",-12).text(m=>m).attr("fill","grey").style("font-size","10px"),d.append("g").selectAll(".label-score").data(["SB#"]).join("text").attr("x",-22).attr("y",-12).text(m=>m).attr("fill","grey").style("font-size","10px"),d.append("g").selectAll(".label-score").data(["SB HalfTime Score Difference"]).join("text").attr("x",l-145.75).attr("y",f-1).text(m=>m).attr("fill","grey").style("font-size","10px");const N=Fn(["team up at half won game","team down at half won game","tied"],["red","green","grey"]),k=Np().shape("path",Tf().type(ta).size(25)()).shapePadding(5).scale(N);d.append("g").attr("class","legend").attr("transform",`translate(${l-155},${f-75})`).style("font-size","10px").call(k),Ke(".legend").selectAll(".label").attr("fill","grey"),Ke(".legend").selectAll("path").attr("transform","translate(0,1.65)")}const yi=t=>{let e=0;return t.forEach(r=>{e+=r.difference}),e/t.length};document.querySelector("#app").innerHTML=`
  <div>
    <div id="title">
    <div id="mainTitle">
    Patrick Mahomes and The Kansas City Chiefs Dug Themselves a Historic Unsurmountable Half Time Deficit.
    </div>
    <div id="subTitle">
     The half time score is very predictive of who will win the game. Before Super Bowl 51 with Tom Bardy's New England Patriots no team had ever overcome a 7 point half time deficit.
    </div>
    <div id="authorTitle">
      By: <a id="me" href="https://bsky.app/profile/truesync.bsky.social">Nathan Harris</a>     <a href="https://bsky.app/profile/truesync.bsky.social">@truesync.bsky.social</a> <a href="http://nathanharris.co">nathanharris.co</a> 
    </div>

    </div>
    <div id="chart"></div> 
    <div id="links">
    <a href ="https://bsky.app/intent/compose?text=Patrick%20Mahomes%20and%20the%20KC%20Chiefs%20dug%20themselves%20a%20Historic%20half%20time%20deficit%20the%202nd%20worse%20ever.%20Explore%20Super%20Bowl%20comebacks%20and%20more%20in%20this%20Visualization%20http%3A%2F%2F https://nharrisanalyst.github.io/superbowlhalf/" class='sm-link'>
      <svg class="w-6 h-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 568 501"><title>Bluesky butterfly logo</title><path fill="currentColor" d="M123.121 33.664C188.241 82.553 258.281 181.68 284 234.873c25.719-53.192 95.759-152.32 160.879-201.21C491.866-1.611 568-28.906 568 57.947c0 17.346-9.945 145.713-15.778 166.555-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281-2.462-7.227-3.614-10.608-3.631-7.733-.017-2.875-1.169.506-3.631 7.733-13.43 39.422-65.842 193.273-185.702 70.281-63.111-64.76-33.89-129.52 80.986-149.071-65.72 11.185-139.6-7.295-159.875-79.748C9.945 203.659 0 75.291 0 57.946 0-28.906 76.135-1.612 123.121 33.664Z"></path></svg>
    </a>
    <div id="tweet-this">
    <a href="https://twitter.com/intent/tweet?hashtags=NFL&text=Explore Super Bowl Halftime Deficits&url=https://nharrisanalyst.github.io/superbowlhalf/" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
    </div>
    <div id="reddit-this">
      <a href="https://reddit.com/submit?url=https%3A%2F%2Fnharrisanalyst.github.io%2Fsuperbowlhalf%2F&title=Patrick Mahomes and The Kansas City Chiefs Dug Themselves a Historic Unsurmountable Half Time Deficit." onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" title="Share on Reddit" rel="noopener" >Share on Reddit</a>
    </div>
    <div id="newsletter">
       <div id="newsletter-title"> subscribe to my Data Visualization newsletter &nbsp; &nbsp; </div>
      <iframe src="https://embeds.beehiiv.com/da2f7bb3-4c1d-43cd-bb63-8094b70fa63f?slim=true" data-test-id="beehiiv-embed" height="52" frameborder="0" scrolling="no" style="margin: 0; border-radius: 0px !important; background-color: transparent;"></iframe>
      </div>
    </div>
  </div>
`;document.querySelector("#mainTitle"),document.querySelector("#subTitle");Ap(document.querySelector("#chart"));
